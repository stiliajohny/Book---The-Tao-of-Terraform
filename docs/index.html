<?xml version="1.0" encoding="utf-8" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- xhtml,charset=utf-8,html --> 
<meta name="src" content="main.tex" /> 
<link rel="stylesheet" type="text/css" href="main.css" /> 
</head><body 
>
                                                                
                                                                
<!--l. 18--><p class="noindent" >
                                                                
                                                                
                                                                
                                                                
</p>
<div class="center" 
>
<!--l. 3--><p class="noindent" >
</p><!--l. 5--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-248">The Tao of Terraform</span></p></div>
                                                                
                                                                
<div class="center" 
>
<!--l. 5--><p class="noindent" >
</p><!--l. 8--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-248">The Tao of Terraform</span><br /><br />
<span 
class="ntx-Regular-tlf-t1-x-x-144">Mastering IaC with Purpose and Precision</span><br /><br />
<span 
class="ntx-Regular-tlf-t1-x-x-144">John Stilia</span><br /><br />
<span 
class="ntx-Regular-tlf-t1-x-x-109">Ioannis Stylianakos</span><br />
</p>
</div>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
<div class="center" 
>
<!--l. 5--><p class="noindent" >
</p><!--l. 9--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">Copyright </span><span 
class="ts1-qtmr-x-x-109">© </span><span 
class="ntx-Regular-tlf-t1-x-x-109">2025 John Stilia (Ioannis Stylianakos)</span><br /><br />
<span 
class="ntx-Regular-tlf-t1-x-x-109">All rights reserved.</span><br /><br />
<span 
class="ntx-Regular-tlf-t1-x-x-109">No part of this publication may be reproduced, distributed, or transmitted in</span>
<span 
class="ntx-Regular-tlf-t1-x-x-109">any form or by any means, including photocopying, recording, or other</span>
<span 
class="ntx-Regular-tlf-t1-x-x-109">electronic or mechanical methods, without the prior written permission of</span>
<span 
class="ntx-Regular-tlf-t1-x-x-109">the publisher, except in the case of brief quotations embodied in critical</span>
<span 
class="ntx-Regular-tlf-t1-x-x-109">reviews and certain other noncommercial uses permitted by copyright law.</span><br /><br />
<span 
class="ntx-Regular-tlf-t1-x-x-109">First Edition</span><br /><br />
</p>
</div>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
<div class="center" 
>
<!--l. 5--><p class="noindent" >
</p><!--l. 6--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-172">Dedication</span><br /><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">To the architects of boundless digital realms,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">the visionaries who transmute code into creation,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">and the audacious engineers of tomorrow.</span><br /><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">To those who understand that every line of code</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">is a covenant with the future,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">each resource a testament to possibility.</span><br /><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">And to all who embrace Terraform’s creed,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">recognizing its methodology as more than a tool,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">but a revolution in the art of Infrastructure as Code.</span><br /><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">May these words ignite your passion,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">as you traverse the formidable realm of Terraform,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">where raw chaos is sculpted into order,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-120">and the digital landscape is reborn through your command.</span><br /><br />
<span 
class="ntx-Italic-tlf-t1-x-x-109">And most importantly,</span><br />
                                                                
                                                                
<span 
class="ntx-Italic-tlf-t1-x-x-109">To my partner in life Beatriz,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-109">for her patience and support</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-109">and for being my best friend,</span><br />
<span 
class="ntx-Italic-tlf-t1-x-x-109">strongest critic, and most trusted conﬁdant.</span>
</p></div>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
<h2 class="likechapterHead"><a 
 id="x1-1000"></a>Preface</h2>
<a 
 id="Q1-1-2"></a>
<h3 class="likesectionHead"><a 
 id="x1-2000"></a>About this Book</h3>
<!--l. 9--><p class="noindent" >This book serves as an entry-level guide to learning Terraform, showcasing
its elegant simplicity and powerful Infrastructure as Code (IaC) capabilities.
Through practical examples and clear explanations, you’ll discover how
Terraform’s straightforward approach makes managing infrastructure both
accessible and scalable. To add real-world context, this book incorporates
AWS into some Terraform examples, oﬀering practical insights into cloud
infrastructure management. For those who are curious, we’ve hidden
several easter eggs throughout the book—small surprises that reward
careful attention to detail.
</p>
<h3 class="likesectionHead"><a 
 id="x1-3000"></a>Styles</h3>
<a 
 id="Q1-1-5"></a>
<!--l. 15--><p class="noindent" >Throughout this book, you’ll encounter various formatting styles to enhance
readability and highlight important information:
</p>
  <ul class="itemize1">
  <li class="itemize">
                                                                
                                                                
  <!--l. 19--><p class="noindent" ><span 
class="pcrr8t-x-x-120">Code blocks </span>-  For  commands  and  conﬁgurations,  including
  Terraform’s HCL (HashiCorp Conﬁguration Language)
  </p></li>
  <li class="itemize">
  <!--l. 20--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Key concepts </span>- Highlighted in bold
  </p></li>
  <li class="itemize">
  <!--l. 21--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">Notes and tips </span>- Presented in italics
  </p></li>
  <li class="itemize">
  <!--l. 22--><p class="noindent" >Examples - Practical demonstrations of concepts
  </p></li>
  <li class="itemize">
  <!--l. 23--><p class="noindent" ><span class="fbox">Boxed content</span> - For special attention or warnings
  </p></li>
  <li class="itemize">
  <!--l. 24--><p class="noindent" ><span class="underline">Underlined text</span> - For emphasis or deﬁnitions</p></li></ul>
<h3 class="likesectionHead"><a 
 id="x1-4000"></a>Command Notation</h3>
<a 
 id="Q1-1-7"></a>
<!--l. 31--><p class="noindent" >When presenting commands and code examples, we use speciﬁc notation to
enhance readability: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 33--><p class="noindent" ><span 
class="pcrr8t-x-x-120">command </span>- Basic commands (e.g., <span 
class="pcrr8t-x-x-120">terraform</span>)
                                                                
                                                                
      </p></li>
      <li class="itemize">
      <!--l. 34--><p class="noindent" ><span 
class="pcrr8t-x-x-120">[resource] </span>- Terraform resource types
      </p></li>
      <li class="itemize">
      <!--l. 35--><p class="noindent" ><span 
class="pcrr8t-x-x-120">-var "key=value" </span>- Variable declarations
      </p></li>
      <li class="itemize">
      <!--l. 36--><p class="noindent" ><span 
class="pcrr8t-x-x-120">terraform apply </span>- Applying Terraform conﬁgurations</p></li></ul>
<!--l. 39--><p class="noindent" >Code blocks use <span 
class="pcrr8t-x-x-120">lstlisting </span>for syntax highlighting.
</p>
<h3 class="likesectionHead"><a 
 id="x1-5000"></a>How this Book is Structured</h3>
<a 
 id="Q1-1-9"></a>
<!--l. 44--><p class="noindent" >This book follows a natural learning progression, starting with foundational
concepts and gradually moving into more advanced territory. The journey
begins with core principles and setup, where you’ll learn the basics
of Terraform and its philosophy. From there, we explore practical
implementations and real-world scenarios, building your conﬁdence with
hands-on examples.
</p><!--l. 46--><p class="noindent" >As you progress, you’ll delve into more sophisticated topics like scaling,
security, and troubleshooting. Each section builds upon previous
knowledge, ensuring you have a solid understanding before tackling more
complex concepts. The book concludes with reﬂections on best practices
and guidance for your continued journey with Terraform.
</p><!--l. 48--><p class="noindent" >Throughout the text, practical examples and exercises reinforce theoretical
concepts, allowing you to learn by doing. Whether you’re new to
                                                                
                                                                
Infrastructure as Code or looking to expand your skills, this structured
approach helps you build a comprehensive understanding of Terraform’s
capabilities.
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="likechapterHead"><a 
 id="x1-6000"></a>Contributors</h2>
<a 
 id="Q1-1-11"></a>
<h3 class="likesectionHead"><a 
 id="x1-7000"></a>Technical Reviewers</h3>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 7--><p class="noindent" >Jane Smith - Senior DevOps Engineer at TechCorp
      </p></li>
      <li class="itemize">
      <!--l. 8--><p class="noindent" >Michael Rosenfeld - Solutions Architect at RoseSecurity</p></li></ul>
<h3 class="likesectionHead"><a 
 id="x1-8000"></a>Proofreaders</h3>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 15--><p class="noindent" >John Stilia - Devops Engineer - stiliajohny
      </p></li>
      <li class="itemize">
      <!--l. 16--><p class="noindent" >Michael  Rosenfeld  -  Solutions  Architect  at  RoseSecurity  -
      rosesecurity
      </p></li>
      <li class="itemize">
      <!--l. 17--><p class="noindent" >Veronika Priesner - Cloud Architect - nika-pr
                                                                
                                                                
</p>
      </li></ul>
<h3 class="likesectionHead"><a 
 id="x1-9000"></a>Content Contributors</h3>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 25--><p class="noindent" >John Stilia - Devops Engineer - stiliajohny</p></li></ul>
<div class="center" 
>
<!--l. 30--><p class="noindent" >
</p><!--l. 31--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-109">Thank you to all contributors for their valuable input and contributions.</span></p></div>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
<h2 class="likechapterHead"><a 
 id="x1-10000"></a>The Hidden Path of Terraform</h2>
<a 
 id="Q1-1-16"></a>
<div class="center" 
>
<!--l. 5--><p class="noindent" >
</p><!--l. 6--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-144">Hidden Wisdom in The Tao of Terraform</span></p></div>
<!--l. 10--><p class="noindent" >Throughout this book, certain words of power lie hidden in plain sight,
marked in bold text. These words hold special signiﬁcance in the realm of
Terraform. Can you ﬁnd them all?
</p>
<div class="center" 
>
<!--l. 13--><p class="noindent" >
</p>
<div class="tabular"> <table id="TBL-1" class="tabular" 
 
><colgroup id="TBL-1-1g"><col 
id="TBL-1-1" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-1-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-1-1"  
class="td11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _ _ _        </span></td></tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-2-1"  
class="td
11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _ _ _ _ _ _ _</span></td></tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-3-1"  
class="td
11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _ _ _ _      </span></td></tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-4-1"  
class="td
11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _            </span></td></tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-5-1"  
class="td
11"><span 
class="pcrr8t-x-x-144">_ _ _ _                </span></td></tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-6-1"  
class="td
11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _ _ _        </span></td>
</tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-7-1"  
class="td11"><span 
class="pcrr8t-x-x-144">_ _ _ _                </span></td>
</tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-8-1"  
class="td11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _ _ _        </span></td>
</tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-9-1"  
class="td11"><span 
class="pcrr8t-x-x-144">_ _ _ _ _ _ _ _ _      </span></td>
</tr><tr 
class="vspace" style="font-size:8.5359pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-10-1"  
class="td11">                            </td>
</tr></table>
                                                                
                                                                
</div></div>
<!--l. 39--><p class="noindent" ><span class="fbox"><span 
class="ntx-Bold-tlf-t1-x-x-109">Hints:</span> </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 46--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">Look for words emphasized in </span><span 
class="ntx-Bold-tlf-t1-x-x-109">bold </span><span 
class="ntx-Regular-tlf-t1-x-x-109">throughout the chapters</span>
      </p></li>
      <li class="itemize">
      <!--l. 46--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">Each word is a key Terraform concept or command</span>
      </p></li>
      <li class="itemize">
      <!--l. 46--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">The number of underscores matches the length of each hidden word</span></p></li></ul>  </span>
<div class="center" 
>
<!--l. 50--><p class="noindent" >
</p><!--l. 51--><p class="noindent" ><span class="rotatebox" style="transform: rotate(-180deg);">                                                                      <!--tex4ht:inline--></p><div class="tabular"> <table id="TBL-2" class="tabular" 
 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:normal; text-align:left;" id="TBL-2-1-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-109">Solution:</span>                                                                                                             </p></td></tr><tr 
class="vspace" style="font-size:5.69046pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:normal; text-align:left;" id="TBL-2-2-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">TERRAFORM, found in chapter 2</span></p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:normal; text-align:left;" id="TBL-2-3-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">INFRASTRUCTURE, found in chapter 3</span>                                                            </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:normal; text-align:left;" id="TBL-2-4-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">PROVISIONING, found in chapter 4</span>                                                                   </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:normal; text-align:left;" id="TBL-2-5-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">MODULES, found in chapter 5</span>                                                                           </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:normal; text-align:left;" id="TBL-2-6-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">STATE, found in chapter 6</span>                                                                                   </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-7-"><td  style="white-space:normal; text-align:left;" id="TBL-2-7-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">VARIABLES, found in chapter 7</span>                                                                         </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-8-"><td  style="white-space:normal; text-align:left;" id="TBL-2-8-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">OUTPUT, found in chapter 8</span>                                                                               </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-9-"><td  style="white-space:normal; text-align:left;" id="TBL-2-9-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">AUTOMATION, found in chapter 9</span>                                                                    </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-10-"><td  style="white-space:normal; text-align:left;" id="TBL-2-10-1"  
class="td11"><!--l. 75--><p class="noindent" ><span 
class="ntx-Regular-tlf-t1-x-x-109">SCALABILITY, found in chapter 10</span>                                                                   </p></td>
</tr><tr 
class="vspace" style="font-size:4.26773pt"><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-11-"><td  style="white-space:normal; text-align:left;" id="TBL-2-11-1"  
class="td11">                                                </td>
</tr></table>                                                  </div></span></div>
                                                                <div class="flushright" 
>
<!--l. 79--><p class="noindent" >
 <span 
class="ntx-Italic-tlf-t1-x-x-109">May your infrastructure journey be guided by these words of power...</span></p></div>
                                                                
                                                                
                                                                
                                                                
<!--l. 29--><p class="noindent" >
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="likechapterHead"><a 
 id="x1-11000"></a><span 
class="ntx-Bold-tlf-t1-x-x-172">Contents</span></h2>
<div class="tableofcontents">
<span class="chapterToc" > <a 
href="#Q1-1-2">Preface</a></span>
<br /> <span class="sectionToc" ><a 
href="#Q1-1-5">Styles</a></span>
<br /> <span class="sectionToc" ><a 
href="#Q1-1-7">Command Notation</a></span>
<br /> <span class="sectionToc" ><a 
href="#Q1-1-9">How this Book is Structured</a></span>
<br /><span class="chapterToc" > <a 
href="#Q1-1-11">Contributors</a></span>
<br /><span class="chapterToc" > <a 
href="#Q1-1-16">The Hidden Path of Terraform</a></span>
<br /><span class="chapterToc" >1 <a 
href="#x1-120001" id="QQ2-1-18">The Philosophy of Infrastructure as Code</a></span>
<br /> <span class="sectionToc" >1.1 <a 
href="#x1-130001" id="QQ2-1-19">Introduction to Infrastructure as Code (IaC)</a></span>
<br /> <span class="sectionToc" >1.2 <a 
href="#x1-140002" id="QQ2-1-20">The Tao of Automation</a></span>
<br /> <span class="sectionToc" >1.3 <a 
href="#x1-150003" id="QQ2-1-21">Simplicity and Clarity in IaC</a></span>
<br /> <span class="sectionToc" >1.4 <a 
href="#x1-160004" id="QQ2-1-22">Terraform’s Role in Modern DevOps</a></span>
<br /> <span class="sectionToc" >1.5 <a 
href="#x1-170005" id="QQ2-1-23">Wrapping Up</a></span>
                                                                
                                                                
<br /><span class="chapterToc" >2 <a 
href="#x1-180002" id="QQ2-1-24">Getting Started with Terraform</a></span>
<br /> <span class="sectionToc" >2.1 <a 
href="#x1-190001" id="QQ2-1-25">Installing Terraform</a></span>
<br />  <span class="subsectionToc" >2.1.1 <a 
href="#x1-200001" id="QQ2-1-26">Installing on Linux</a></span>
<br />  <span class="subsectionToc" >2.1.2 <a 
href="#x1-210002" id="QQ2-1-27">Installing on macOS</a></span>
<br />  <span class="subsectionToc" >2.1.3 <a 
href="#x1-220003" id="QQ2-1-28">Installing on Windows</a></span>
<br /> <span class="sectionToc" >2.2 <a 
href="#x1-230002" id="QQ2-1-29">Setting up Your First Conﬁguration</a></span>
<br /> <span class="sectionToc" >2.3 <a 
href="#x1-240003" id="QQ2-1-30">Terraform Providers and Resources</a></span>
<br />  <span class="subsectionToc" >2.3.1 <a 
href="#x1-250001" id="QQ2-1-31">Conﬁguring Providers</a></span>
<br />  <span class="subsectionToc" >2.3.2 <a 
href="#x1-260002" id="QQ2-1-32">Resources</a></span>
<br /> <span class="sectionToc" >2.4 <a 
href="#x1-270004" id="QQ2-1-33">Wrapping Up</a></span>
<br /><span class="chapterToc" >3 <a 
href="#x1-280003" id="QQ2-1-34">The Essence of Terraform Conﬁguration</a></span>
<br /> <span class="sectionToc" >3.1 <a 
href="#x1-290001" id="QQ2-1-35">Understanding the HCL</a></span>
<br /> <span class="sectionToc" >3.2 <a 
href="#x1-300002" id="QQ2-1-36">(HashiCorp Conﬁguration Language)</a></span>
<br />  <span class="subsectionToc" >3.2.1 <a 
href="#x1-310001" id="QQ2-1-37">Basic Syntax</a></span>
<br /> <span class="sectionToc" >3.3 <a 
href="#x1-320003" id="QQ2-1-38">Declaring Resources</a></span>
<br /> <span class="sectionToc" >3.4 <a 
href="#x1-330004" id="QQ2-1-39">Variables, Outputs, and Locals</a></span>
<br />  <span class="subsectionToc" >3.4.1 <a 
href="#x1-340001" id="QQ2-1-40">Variables</a></span>
<br />  <span class="subsectionToc" >3.4.2 <a 
href="#x1-350002" id="QQ2-1-41">Outputs</a></span>
<br />  <span class="subsectionToc" >3.4.3 <a 
href="#x1-360003" id="QQ2-1-42">Locals</a></span>
                                                                
                                                                
<br /> <span class="sectionToc" >3.5 <a 
href="#x1-370005" id="QQ2-1-43">Best Practices for Clean, Modular Code</a></span>
<br />  <span class="subsectionToc" >3.5.1 <a 
href="#x1-380001" id="QQ2-1-44">Use Modules for Reusability</a></span>
<br />  <span class="subsectionToc" >3.5.2 <a 
href="#x1-390002" id="QQ2-1-45">Keep Resources and Variables Organized</a></span>
<br /> <span class="sectionToc" >3.6 <a 
href="#x1-400006" id="QQ2-1-46">Wrapping Up</a></span>
<br /><span class="chapterToc" >4 <a 
href="#x1-410004" id="QQ2-1-47">Planning and Applying Changes</a></span>
<br /> <span class="sectionToc" >4.1 <a 
href="#x1-420001" id="QQ2-1-48">The <span 
class="pcrr8t-x-x-120">terraform plan </span>Command</a></span>
<br />  <span class="subsectionToc" >4.1.1 <a 
href="#x1-430001" id="QQ2-1-49">Understanding the Plan Output</a></span>
<br />  <span class="subsectionToc" >4.1.2 <a 
href="#x1-440002" id="QQ2-1-50">Dry Run</a></span>
<br /> <span class="sectionToc" >4.2 <a 
href="#x1-450002" id="QQ2-1-51">The <span 
class="pcrr8t-x-x-120">terraform apply </span>Command</a></span>
<br />  <span class="subsectionToc" >4.2.1 <a 
href="#x1-460001" id="QQ2-1-52">Applying Changes Safely</a></span>
<br />  <span class="subsectionToc" >4.2.2 <a 
href="#x1-470002" id="QQ2-1-53">Automating <span 
class="pcrr8t-x-x-120">apply </span>in CI/CD Pipelines</a></span>
<br /> <span class="sectionToc" >4.3 <a 
href="#x1-480003" id="QQ2-1-54">What Happens Behind the Scenes?</a></span>
<br /> <span class="sectionToc" >4.4 <a 
href="#x1-490004" id="QQ2-1-55">Using the <span 
class="pcrr8t-x-x-120">terraform destroy </span>Command</a></span>
<br /> <span class="sectionToc" >4.5 <a 
href="#x1-500005" id="QQ2-1-56">Working with Multiple Environments</a></span>
<br />  <span class="subsectionToc" >4.5.1 <a 
href="#x1-510001" id="QQ2-1-57">Using Workspaces</a></span>
<br /> <span class="sectionToc" >4.6 <a 
href="#x1-520006" id="QQ2-1-58">Wrapping Up</a></span>
<br /><span class="chapterToc" >5 <a 
href="#x1-530005" id="QQ2-1-59">Managing State</a></span>
<br /> <span class="sectionToc" >5.1 <a 
href="#x1-540001" id="QQ2-1-60">State Files and Their Importance</a></span>
<br />  <span class="subsectionToc" >5.1.1 <a 
href="#x1-550001" id="QQ2-1-61">Understanding the State File</a></span>
                                                                
                                                                
<br /> <span class="sectionToc" >5.2 <a 
href="#x1-560002" id="QQ2-1-62">Backends</a></span>
<br />  <span class="subsectionToc" >5.2.1 <a 
href="#x1-570001" id="QQ2-1-63">Types of Backends</a></span>
<br />  <span class="subsectionToc" >5.2.2 <a 
href="#x1-580002" id="QQ2-1-64">Conﬁguring a Local Backend</a></span>
<br />  <span class="subsectionToc" >5.2.3 <a 
href="#x1-590003" id="QQ2-1-65">Why Use Remote Backends?</a></span>
<br /> <span class="sectionToc" >5.3 <a 
href="#x1-600003" id="QQ2-1-66">State Locking</a></span>
<br />  <span class="subsectionToc" >5.3.1 <a 
href="#x1-610001" id="QQ2-1-67">State Locking in Practice</a></span>
<br /> <span class="sectionToc" >5.4 <a 
href="#x1-620004" id="QQ2-1-68">Managing State with <span 
class="pcrr8t-x-x-120">terraform state</span></a></span>
<br />  <span class="subsectionToc" >5.4.1 <a 
href="#x1-630001" id="QQ2-1-69">Viewing the State</a></span>
<br />  <span class="subsectionToc" >5.4.2 <a 
href="#x1-640002" id="QQ2-1-70">Modifying the State</a></span>
<br /> <span class="sectionToc" >5.5 <a 
href="#x1-650005" id="QQ2-1-71">State File Security</a></span>
<br /> <span class="sectionToc" >5.6 <a 
href="#x1-660006" id="QQ2-1-72">State File Backups</a></span>
<br /> <span class="sectionToc" >5.7 <a 
href="#x1-670007" id="QQ2-1-73">Conclusion</a></span>
<br /><span class="chapterToc" >6 <a 
href="#x1-680006" id="QQ2-1-74">Organizing Terraform Conﬁgurations</a></span>
<br /> <span class="sectionToc" >6.1 <a 
href="#x1-690001" id="QQ2-1-75">Why Organizing Terraform Conﬁgurations Matters</a></span>
<br /> <span class="sectionToc" >6.2 <a 
href="#x1-700002" id="QQ2-1-76">Using Modules for Reusability</a></span>
<br />  <span class="subsectionToc" >6.2.1 <a 
href="#x1-710001" id="QQ2-1-77">What is a Module?</a></span>
<br />  <span class="subsectionToc" >6.2.2 <a 
href="#x1-720002" id="QQ2-1-78">Creating and Using Modules</a></span>
<br /> <span class="sectionToc" >6.3 <a 
href="#x1-730003" id="QQ2-1-79">Organizing Conﬁguration Files</a></span>
<br />  <span class="subsectionToc" >6.3.1 <a 
href="#x1-740001" id="QQ2-1-80">Separate Files for Providers, Resources, and Variables</a></span>
                                                                
                                                                
<br />  <span class="subsectionToc" >6.3.2 <a 
href="#x1-750002" id="QQ2-1-81">Example Directory Structure</a></span>
<br /> <span class="sectionToc" >6.4 <a 
href="#x1-760004" id="QQ2-1-82">Working with Workspaces for Multiple Environments</a></span>
<br />  <span class="subsectionToc" >6.4.1 <a 
href="#x1-770001" id="QQ2-1-83">Creating and Managing Workspaces</a></span>
<br />  <span class="subsectionToc" >6.4.2 <a 
href="#x1-780002" id="QQ2-1-84">Using Workspaces in the Conﬁguration</a></span>
<br /> <span class="sectionToc" >6.5 <a 
href="#x1-790005" id="QQ2-1-85">Using Backend Conﬁgurations for Centralized State</a></span>
<br />  <span class="subsectionToc" >6.5.1 <a 
href="#x1-800001" id="QQ2-1-86">Conﬁguring a Remote Backend</a></span>
<br />  <span class="subsectionToc" >6.5.2 <a 
href="#x1-810002" id="QQ2-1-87">Other Backend Types</a></span>
<br /> <span class="sectionToc" >6.6 <a 
href="#x1-820006" id="QQ2-1-88">Wrapping Up</a></span>
<br /><span class="chapterToc" >7 <a 
href="#x1-830007" id="QQ2-1-89">Collaboration and Version Control</a></span>
<br /> <span class="sectionToc" >7.1 <a 
href="#x1-840001" id="QQ2-1-90">Versioning Terraform and Providers</a></span>
<br />  <span class="subsectionToc" >7.1.1 <a 
href="#x1-850001" id="QQ2-1-91">Versioning Terraform Conﬁgurations</a></span>
<br />  <span class="subsectionToc" >7.1.2 <a 
href="#x1-860002" id="QQ2-1-92">Versioning Terraform Providers</a></span>
<br /> <span class="sectionToc" >7.2 <a 
href="#x1-870002" id="QQ2-1-93">Collaboration with Git</a></span>
<br />  <span class="subsectionToc" >7.2.1 <a 
href="#x1-880001" id="QQ2-1-94">Creating Branches for Features</a></span>
<br />  <span class="subsectionToc" >7.2.2 <a 
href="#x1-890002" id="QQ2-1-95">Merging and Deploying Changes</a></span>
<br /> <span class="sectionToc" >7.3 <a 
href="#x1-900003" id="QQ2-1-96">Managing Remote State for Teams</a></span>
<br />  <span class="subsectionToc" >7.3.1 <a 
href="#x1-910001" id="QQ2-1-97">Using Remote Backends for Collaboration</a></span>
<br />  <span class="subsectionToc" >7.3.2 <a 
href="#x1-920002" id="QQ2-1-98">State Locking and Consistency</a></span>
<br /> <span class="sectionToc" >7.4 <a 
href="#x1-930004" id="QQ2-1-99">Best Practices for Collaboration</a></span>
                                                                
                                                                
<br /> <span class="sectionToc" >7.5 <a 
href="#x1-940005" id="QQ2-1-100">Wrapping Up</a></span>
<br /><span class="chapterToc" >8 <a 
href="#x1-950008" id="QQ2-1-101">Secrets Management and Security</a></span>
<br /> <span class="sectionToc" >8.1 <a 
href="#x1-960001" id="QQ2-1-102">Managing Sensitive Data Securely</a></span>
<br />  <span class="subsectionToc" >8.1.1 <a 
href="#x1-970001" id="QQ2-1-103">Using Environment Variables</a></span>
<br /> <span class="sectionToc" >8.2 <a 
href="#x1-980002" id="QQ2-1-104">Using HashiCorp Vault for Secrets</a></span>
<br />  <span class="subsectionToc" >8.2.1 <a 
href="#x1-990001" id="QQ2-1-105">Integrating Terraform with Vault</a></span>
<br />  <span class="subsectionToc" >8.2.2 <a 
href="#x1-1000002" id="QQ2-1-106">Access Control in Vault</a></span>
<br /> <span class="sectionToc" >8.3 <a 
href="#x1-1010003" id="QQ2-1-107">Securing Terraform State Files</a></span>
<br />  <span class="subsectionToc" >8.3.1 <a 
href="#x1-1020001" id="QQ2-1-108">Remote Backends with Encryption</a></span>
<br />  <span class="subsectionToc" >8.3.2 <a 
href="#x1-1030002" id="QQ2-1-109">State File Permissions</a></span>
<br /> <span class="sectionToc" >8.4 <a 
href="#x1-1040004" id="QQ2-1-110">Managing Secrets in CI/CD Pipelines</a></span>
<br />  <span class="subsectionToc" >8.4.1 <a 
href="#x1-1050001" id="QQ2-1-111">Using GitLab CI for Secrets Management</a></span>
<br />  <span class="subsectionToc" >8.4.2 <a 
href="#x1-1060002" id="QQ2-1-112">Secrets in GitHub Actions</a></span>
<br /> <span class="sectionToc" >8.5 <a 
href="#x1-1070005" id="QQ2-1-113">Wrapping Up</a></span>
<br /><span class="chapterToc" >9 <a 
href="#x1-1080009" id="QQ2-1-114">Testing and Validation</a></span>
<br /> <span class="sectionToc" >9.1 <a 
href="#x1-1090001" id="QQ2-1-115">The Importance of Testing in Infrastructure as Code</a></span>
<br /> <span class="sectionToc" >9.2 <a 
href="#x1-1100002" id="QQ2-1-116">Unit Testing Terraform Code</a></span>
<br />  <span class="subsectionToc" >9.2.1 <a 
href="#x1-1110001" id="QQ2-1-117">Using Terraform’s Built-in Validation</a></span>
<br />  <span class="subsectionToc" >9.2.2 <a 
href="#x1-1120002" id="QQ2-1-118">Using <span 
class="pcrr8t-x-x-120">tflint </span>for Static Code Analysis</a></span>
                                                                
                                                                
<br /> <span class="sectionToc" >9.3 <a 
href="#x1-1130003" id="QQ2-1-119">Integration Testing with <span 
class="pcrr8t-x-x-120">terraform plan</span></a></span>
<br />  <span class="subsectionToc" >9.3.1 <a 
href="#x1-1140001" id="QQ2-1-120">Running <span 
class="pcrr8t-x-x-120">terraform plan</span></a></span>
<br />  <span class="subsectionToc" >9.3.2 <a 
href="#x1-1150002" id="QQ2-1-121">Environment-Speciﬁc Testing</a></span>
<br /> <span class="sectionToc" >9.4 <a 
href="#x1-1160004" id="QQ2-1-122">Using <span 
class="pcrr8t-x-x-120">terraform apply </span>Safely</a></span>
<br />  <span class="subsectionToc" >9.4.1 <a 
href="#x1-1170001" id="QQ2-1-123">Using <span 
class="pcrr8t-x-x-120">-auto-approve </span>with <span 
class="pcrr8t-x-x-120">terraform apply</span></a></span>
<br /> <span class="sectionToc" >9.5 <a 
href="#x1-1180005" id="QQ2-1-124">Acceptance Testing with <span 
class="pcrr8t-x-x-120">terratest</span></a></span>
<br /> <span class="sectionToc" >9.6 <a 
href="#x1-1190006" id="QQ2-1-125">Validating Infrastructure with <span 
class="pcrr8t-x-x-120">infracost</span></a></span>
<br /> <span class="sectionToc" >9.7 <a 
href="#x1-1200007" id="QQ2-1-126">Wrapping Up</a></span>
<br /><span class="chapterToc" >10 <a 
href="#x1-12100010" id="QQ2-1-127">Scaling Infrastructure with Terraform</a></span>
<br /> <span class="sectionToc" >10.1 <a 
href="#x1-1220001" id="QQ2-1-128">The Need for Scaling in Terraform</a></span>
<br /> <span class="sectionToc" >10.2 <a 
href="#x1-1230002" id="QQ2-1-129">Scaling Resources with Count and For-Each</a></span>
<br />  <span class="subsectionToc" >10.2.1 <a 
href="#x1-1240001" id="QQ2-1-130">Using <span 
class="pcrr8t-x-x-120">count </span>to Scale Resources</a></span>
<br />  <span class="subsectionToc" >10.2.2 <a 
href="#x1-1250002" id="QQ2-1-131">Using <span 
class="pcrr8t-x-x-120">for_each </span>for Fine-Grained Control</a></span>
<br /> <span class="sectionToc" >10.3 <a 
href="#x1-1260003" id="QQ2-1-132">Using Auto Scaling Groups</a></span>
<br />  <span class="subsectionToc" >10.3.1 <a 
href="#x1-1270001" id="QQ2-1-133">Creating an Auto Scaling Group</a></span>
<br />  <span class="subsectionToc" >10.3.2 <a 
href="#x1-1280002" id="QQ2-1-134">Scaling Based on Metrics</a></span>
<br /> <span class="sectionToc" >10.4 <a 
href="#x1-1290004" id="QQ2-1-135">Multi-Region Infrastructure</a></span>
<br />  <span class="subsectionToc" >10.4.1 <a 
href="#x1-1300001" id="QQ2-1-136">Deploying Resources Across Regions</a></span>
<br /> <span class="sectionToc" >10.5 <a 
href="#x1-1310005" id="QQ2-1-137">Wrapping Up</a></span>
                                                                
                                                                
<br /><span class="chapterToc" >11 <a 
href="#x1-13200011" id="QQ2-1-138">Debugging and Troubleshooting</a></span>
<br /> <span class="sectionToc" >11.1 <a 
href="#x1-1330001" id="QQ2-1-139">The Importance of Debugging in Terraform</a></span>
<br /> <span class="sectionToc" >11.2 <a 
href="#x1-1340002" id="QQ2-1-140">Common Terraform Errors and How to Fix Them</a></span>
<br />  <span class="subsectionToc" >11.2.1 <a 
href="#x1-1350001" id="QQ2-1-141">Invalid Conﬁguration Errors</a></span>
<br />  <span class="subsectionToc" >11.2.2 <a 
href="#x1-1360002" id="QQ2-1-142">Resource Not Found Errors</a></span>
<br />  <span class="subsectionToc" >11.2.3 <a 
href="#x1-1370003" id="QQ2-1-143">Provider Conﬁguration Errors</a></span>
<br /> <span class="sectionToc" >11.3 <a 
href="#x1-1380003" id="QQ2-1-144">Using <span 
class="pcrr8t-x-x-120">terraform console </span>for Debugging</a></span>
<br />  <span class="subsectionToc" >11.3.1 <a 
href="#x1-1390001" id="QQ2-1-145">Inspecting Variables and Outputs</a></span>
<br />  <span class="subsectionToc" >11.3.2 <a 
href="#x1-1400002" id="QQ2-1-146">Evaluating Expressions</a></span>
<br /> <span class="sectionToc" >11.4 <a 
href="#x1-1410004" id="QQ2-1-147">Using <span 
class="pcrr8t-x-x-120">terraform plan </span>to Debug Changes</a></span>
<br />  <span class="subsectionToc" >11.4.1 <a 
href="#x1-1420001" id="QQ2-1-148">Reviewing the Plan Output</a></span>
<br /> <span class="sectionToc" >11.5 <a 
href="#x1-1430005" id="QQ2-1-149">State Management and Troubleshooting</a></span>
<br />  <span class="subsectionToc" >11.5.1 <a 
href="#x1-1440001" id="QQ2-1-150">Inspecting the State</a></span>
<br />  <span class="subsectionToc" >11.5.2 <a 
href="#x1-1450002" id="QQ2-1-151">Refreshing the State</a></span>
<br /> <span class="sectionToc" >11.6 <a 
href="#x1-1460006" id="QQ2-1-152">Advanced Debugging with <span 
class="pcrr8t-x-x-120">TF_LOG</span></a></span>
<br /> <span class="sectionToc" >11.7 <a 
href="#x1-1470007" id="QQ2-1-153">Wrapping Up</a></span>
<br /><span class="chapterToc" >12 <a 
href="#x1-14800012" id="QQ2-1-154">Advanced Terraform Functions and Features</a></span>
<br /> <span class="sectionToc" >12.1 <a 
href="#x1-1490001" id="QQ2-1-155">Introduction to Advanced Features</a></span>
<br /> <span class="sectionToc" >12.2 <a 
href="#x1-1500002" id="QQ2-1-156">String Functions in Terraform</a></span>
                                                                
                                                                
<br />  <span class="subsectionToc" >12.2.1 <a 
href="#x1-1510001" id="QQ2-1-157">Common String Functions</a></span>
<br />  <span class="subsectionToc" >12.2.2 <a 
href="#x1-1520002" id="QQ2-1-158">Examples of String Functions</a></span>
<br /> <span class="sectionToc" >12.3 <a 
href="#x1-1530003" id="QQ2-1-159">Conditional Expressions in Terraform</a></span>
<br />  <span class="subsectionToc" >12.3.1 <a 
href="#x1-1540001" id="QQ2-1-160">Using the Ternary Operator</a></span>
<br />  <span class="subsectionToc" >12.3.2 <a 
href="#x1-1550002" id="QQ2-1-161">Example of Conditional Expressions</a></span>
<br /> <span class="sectionToc" >12.4 <a 
href="#x1-1560004" id="QQ2-1-162">Dynamic Blocks in Terraform</a></span>
<br />  <span class="subsectionToc" >12.4.1 <a 
href="#x1-1570001" id="QQ2-1-163">Using Dynamic Blocks</a></span>
<br />  <span class="subsectionToc" >12.4.2 <a 
href="#x1-1580002" id="QQ2-1-164">Example of Dynamic Blocks</a></span>
<br /> <span class="sectionToc" >12.5 <a 
href="#x1-1590005" id="QQ2-1-165">Working with Data Sources in Terraform</a></span>
<br />  <span class="subsectionToc" >12.5.1 <a 
href="#x1-1600001" id="QQ2-1-166">Example of Using Data Sources</a></span>
<br /> <span class="sectionToc" >12.6 <a 
href="#x1-1610006" id="QQ2-1-167">Managing Dependencies in Terraform</a></span>
<br />  <span class="subsectionToc" >12.6.1 <a 
href="#x1-1620001" id="QQ2-1-168">Using <span 
class="pcrr8t-x-x-120">depends_on</span></a></span>
<br />  <span class="subsectionToc" >12.6.2 <a 
href="#x1-1630002" id="QQ2-1-169">Example of <span 
class="pcrr8t-x-x-120">depends_on</span></a></span>
<br /> <span class="sectionToc" >12.7 <a 
href="#x1-1640007" id="QQ2-1-170">Wrapping Up</a></span>
<br /><span class="chapterToc" >13 <a 
href="#x1-16500013" id="QQ2-1-171">The Path Forward</a></span>
<br /> <span class="sectionToc" >13.1 <a 
href="#x1-1660001" id="QQ2-1-172">Terraform Cloud and Enterprise</a></span>
<br />  <span class="subsectionToc" >13.1.1 <a 
href="#x1-1670001" id="QQ2-1-173">What is Terraform Cloud?</a></span>
<br />  <span class="subsectionToc" >13.1.2 <a 
href="#x1-1680002" id="QQ2-1-174">What is Terraform Enterprise?</a></span>
<br /> <span class="sectionToc" >13.2 <a 
href="#x1-1690002" id="QQ2-1-175">Terraform’s Ecosystem: Providers, Modules, and Tools</a></span>
                                                                
                                                                
<br />  <span class="subsectionToc" >13.2.1 <a 
href="#x1-1700001" id="QQ2-1-176">Terraform Providers</a></span>
<br />  <span class="subsectionToc" >13.2.2 <a 
href="#x1-1710002" id="QQ2-1-177">Terraform Modules</a></span>
<br />  <span class="subsectionToc" >13.2.3 <a 
href="#x1-1720003" id="QQ2-1-178">Other Tools in the Terraform Ecosystem</a></span>
<br /> <span class="sectionToc" >13.3 <a 
href="#x1-1730003" id="QQ2-1-179">Continuous Learning and Growth with Terraform</a></span>
<br />  <span class="subsectionToc" >13.3.1 <a 
href="#x1-1740001" id="QQ2-1-180">Staying Up-to-Date with Terraform</a></span>
<br />  <span class="subsectionToc" >13.3.2 <a 
href="#x1-1750002" id="QQ2-1-181">Exploring Advanced Terraform Features</a></span>
<br /> <span class="sectionToc" >13.4 <a 
href="#x1-1760004" id="QQ2-1-182">Wrapping Up</a></span>
<br /><span class="chapterToc" >14 <a 
href="#x1-17700014" id="QQ2-1-183">Reﬂections on Terraform’s Impact</a></span>
<br /> <span class="sectionToc" >14.1 <a 
href="#x1-1780001" id="QQ2-1-184">The Human Element in Infrastructure</a></span>
<br /> <span class="sectionToc" >14.2 <a 
href="#x1-1790002" id="QQ2-1-185">Simplicity vs. Complexity in IaC</a></span>
<br /> <span class="sectionToc" >14.3 <a 
href="#x1-1800003" id="QQ2-1-186">The Philosophy of Infrastructure as Code</a></span>
<br /> <span class="sectionToc" >14.4 <a 
href="#x1-1810004" id="QQ2-1-187">Terraform and the Future of Infrastructure Management</a></span>
<br />  <span class="subsectionToc" >14.4.1 <a 
href="#x1-1820001" id="QQ2-1-188">Multi-Cloud and Hybrid Environments</a></span>
<br />  <span class="subsectionToc" >14.4.2 <a 
href="#x1-1830002" id="QQ2-1-189">Terraform and Kubernetes</a></span>
<br />  <span class="subsectionToc" >14.4.3 <a 
href="#x1-1840003" id="QQ2-1-190">Collaboration and Automation in the DevOps Era</a></span>
<br /> <span class="sectionToc" >14.5 <a 
href="#x1-1850005" id="QQ2-1-191">The Future of Terraform: Expanding Ecosystem and Community</a></span>
<br /> <span class="sectionToc" >14.6 <a 
href="#x1-1860006" id="QQ2-1-192">Wrapping Up</a></span>
<br /><span class="chapterToc" >15 <a 
href="#x1-18700015" id="QQ2-1-193">Conclusion</a></span>
<br /> <span class="sectionToc" >15.1 <a 
href="#x1-1880001" id="QQ2-1-194">Reﬂecting on the Terraform Journey</a></span>
                                                                
                                                                
<br /> <span class="sectionToc" >15.2 <a 
href="#x1-1890002" id="QQ2-1-195">Terraform’s Impact on Infrastructure Automation</a></span>
<br /> <span class="sectionToc" >15.3 <a 
href="#x1-1900003" id="QQ2-1-196">The Role of Terraform in the DevOps Pipeline</a></span>
<br /> <span class="sectionToc" >15.4 <a 
href="#x1-1910004" id="QQ2-1-197">Looking Ahead: Terraform and the Future of Cloud Infrastructure</a></span>
<br /> <span class="sectionToc" >15.5 <a 
href="#x1-1920005" id="QQ2-1-198">Final Thoughts: Mastering Terraform</a></span>
<br /> <span class="sectionToc" >15.6 <a 
href="#x1-1930006" id="QQ2-1-199">Good Luck on Your Terraform Journey!</a></span>
<br /><span class="chapterToc" > <a 
href="#Q1-1-202">About the Author</a></span>
</div>
                                                                
                                                                
                                                                
                                                                
<!--l. 37--><p class="noindent" >
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 1</span><br /><a 
 id="x1-120001"></a>The Philosophy of Infrastructure as Code</h2>
<a 
 id="x1-12001r1"></a>
<h3 class="sectionHead"><span class="titlemark">1.1    </span> <a 
 id="x1-130001"></a>Introduction to Infrastructure as Code (IaC)</h3>
<!--l. 7--><p class="noindent" >Infrastructure as Code (IaC) is the modern approach to managing and
provisioning IT infrastructure through machine-readable deﬁnition ﬁles. It
eliminates the need for manual intervention in setting up servers, networks,
and databases. In the context of Terraform, IaC is about deﬁning
infrastructure as a series of declarative conﬁgurations, which Terraform
then uses to create, modify, and manage resources in a repeatable and
predictable manner.
</p><!--l. 9--><p class="noindent" >The core philosophy behind IaC is to treat infrastructure the same way as
application code: versioned, tested, and automated. With IaC, infrastructure
is no longer a static, one-time setup. It evolves in sync with the software it
supports.
<a 
 id="x1-13001r19"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">1.2    </span> <a 
 id="x1-140002"></a>The Tao of Automation</h3>
<!--l. 13--><p class="noindent" >Terraform represents the &#x0022;Tao&#x0022; of automation by embracing simplicity in its
design and functionality. At its heart, Terraform allows you to describe your
infrastructure in simple, readable conﬁguration ﬁles. These ﬁles,
written in HashiCorp Conﬁguration Language (HCL), declare what
the infrastructure should look like without needing to explicitly
deﬁne every procedural detail. Terraform then manages the lifecycle
of this infrastructure, from creation to destruction, based on these
declarations.
                                                                
                                                                
</p><!--l. 15--><p class="noindent" >Just as the Tao embraces simplicity, Terraform automates infrastructure
tasks without burdening the user with unnecessary complexity. It allows
you to focus on the goals of your infrastructure, rather than the individual
steps required to achieve them.
<a 
 id="x1-14001r20"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">1.3    </span> <a 
 id="x1-150003"></a>Simplicity and Clarity in IaC</h3>
<!--l. 19--><p class="noindent" >In a world ﬁlled with complex tools and frameworks, Terraform stands out
by sticking to its principle of simplicity. Its language is declarative,
meaning users simply declare what they want rather than how to achieve it.
This keeps the mental model clear and ensures that the user is always
focused on their desired outcome rather than getting bogged down by
implementation details.
</p><!--l. 21--><p class="noindent" >Terraform’s simplicity doesn’t sacriﬁce power. It allows for complex
infrastructure to be managed with the same level of ease as a simple web
server setup. The true power of Terraform lies in its ability to scale from the
simplest tasks to complex multi-cloud environments, all while keeping the
process intuitive and manageable.
<a 
 id="x1-15001r21"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">1.4    </span> <a 
 id="x1-160004"></a>Terraform’s Role in Modern DevOps</h3>
<!--l. 25--><p class="noindent" >Terraform is a key enabler of DevOps practices, bridging the gap
between development and operations teams. In DevOps, the goal is to
automate repetitive tasks and enable continuous delivery. Terraform
facilitates this by automating infrastructure provisioning, enabling
teams to quickly spin up new environments for testing, staging, or
production.
                                                                
                                                                
</p><!--l. 27--><p class="noindent" >The necessity of Terraform arose from the challenges faced by organizations in
managing complex infrastructure manually. Historically, operations teams
were burdened with the task of setting up and maintaining infrastructure,
often leading to bottlenecks and inconsistencies. The advent of cloud
computing and the need for rapid deployment cycles highlighted the
limitations of traditional methods. Terraform was created to address these
challenges by providing a uniﬁed, declarative approach to infrastructure
management, allowing for greater agility and collaboration between
development and operations teams.
</p><!--l. 29--><p class="noindent" >Terraform integrates well with modern CI/CD pipelines, allowing
infrastructure changes to be tracked in the same way as application code.
This brings the same beneﬁts of version control, testing, and collaboration
to infrastructure management, fostering collaboration and accelerating
deployment cycles.
<a 
 id="x1-16001r22"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">1.5    </span> <a 
 id="x1-170005"></a>Wrapping Up</h3>
<!--l. 33--><p class="noindent" >Idempotence isn’t just a technical term - it’s a mindset. It’s about writing
tasks that do what’s needed, nothing more, nothing less. It’s about
trusting Terraform to handle the details, so you can focus on the bigger
picture.
</p><!--l. 35--><p class="noindent" >When you start thinking like Terraform, you’ll ﬁnd yourself writing cleaner,
simpler, and more eﬀective conﬁgurations. And that’s not just good for your
automation - it’s good for your sanity.
</p><!--l. 39--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore getting started with Terraform - tools that</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">let you customize and adapt your infrastructure to any situation. Get ready</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">to take your automation skills to the next level.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 2</span><br /><a 
 id="x1-180002"></a>Getting Started with Terraform</h2>
<a 
 id="x1-18001r23"></a>
<h3 class="sectionHead"><span class="titlemark">2.1    </span> <a 
 id="x1-190001"></a>Installing Terraform</h3>
<!--l. 7--><p class="noindent" >To begin using Terraform, the ﬁrst step is to install it on your local machine.
Terraform is available for various operating systems, and the installation
process is straightforward.
<a 
 id="x1-19001r1"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">2.1.1    </span> <a 
 id="x1-200001"></a>Installing on Linux</h4>
<!--l. 11--><p class="noindent" >For Ubuntu/Debian systems, follow these steps to install Terraform using
HashiCorp’s oﬃcial repository:
</p>
<!--l. 13-->
  <div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-20001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">required</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">packages</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">sudo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">get</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">update</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">&amp;&amp;</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">sudo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">get</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">y</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">gnupg</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">software</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">properties</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">common</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Add</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">HashiCorp</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">GPG</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">key</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">wget</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">O</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">https</span></span><span style="color:#000000"><span 
class="pcrr8t-">://</span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">releases</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">com</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">gpg</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">|</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">' </span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="pcrr8t-">gpg</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">--</span></span><span style="color:#000000"><span 
class="pcrr8t-">dearmor</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">|</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">' </span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">sudo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">tee</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">usr</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">share</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">keyrings</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">archive</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">keyring</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">gpg</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">dev</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">null</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Add</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">HashiCorp</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">repository</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span style="color:#000000"><span 
class="pcrr8t-">echo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">deb</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">signed</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">by</span></span><span style="color:#000000"><span 
class="pcrr8t-">=/</span></span><span style="color:#000000"><span 
class="pcrr8t-">usr</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">share</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">keyrings</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">archive</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">keyring</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">gpg</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">' </span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span style="color:#000000"><span 
class="pcrr8t-">https</span></span><span style="color:#000000"><span 
class="pcrr8t-">://</span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">releases</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">com</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">$</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">lsb_release</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">cs</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">|</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">' </span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span style="color:#000000"><span 
class="pcrr8t-">sudo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">tee</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">etc</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">sources</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">d</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Update</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">package</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">and</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span style="color:#000000"><span 
class="pcrr8t-">sudo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">update</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-20016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span style="color:#000000"><span 
class="pcrr8t-">sudo</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apt</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">get</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span></div>
  
<!--l. 32--><p class="noindent" >To verify the installation, run: </p><!--l. 33-->
  <div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-20017r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">--</span></span><span style="color:#000000"><span 
class="pcrr8t-">version</span></span></div>
  
<!--l. 37--><p class="noindent" >For other Linux distributions like CentOS, RHEL, Fedora, or Amazon
Linux, please refer to the oﬃcial Terraform documentation for speciﬁc
installation instructions.
<a 
 id="x1-20018r26"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">2.1.2    </span> <a 
 id="x1-210002"></a>Installing on macOS</h4>
<!--l. 41--><p class="noindent" >For macOS, you can install Terraform using Homebrew, a package manager
for macOS. Follow these steps to install Terraform:
</p>
<!--l. 43-->
  <div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-21001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Add</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">HashiCorp</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">tap</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">brew</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">tap</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">tap</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">brew</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">tap</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span></div>
  
<!--l. 51--><p class="noindent" >To update to the latest version of Terraform, run:
</p>
<!--l. 53-->
  <div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-21006r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Update</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Homebrew</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21007r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">brew</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">update</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21008r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21009r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Upgrade</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-21010r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">brew</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">upgrade</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">tap</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span></div>
  
<a 
 id="x1-21011r27"></a>
<h4 class="subsectionHead"><span class="titlemark">2.1.3    </span> <a 
 id="x1-220003"></a>Installing on Windows</h4>
<!--l. 63--><p class="noindent" >On Windows, the recommended method is using Chocolatey or
downloading the binary directly from the Terraform website. If you’re using
Chocolatey, simply run:
</p>
<!--l. 65-->
  <div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-22001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">choco</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span></div>
  
<a 
 id="x1-22002r25"></a>
                                                                
                                                                
<h3 class="sectionHead"><span class="titlemark">2.2    </span> <a 
 id="x1-230002"></a>Setting up Your First Conﬁguration</h3>
<!--l. 71--><p class="noindent" >Once Terraform is installed, it’s time to create your ﬁrst conﬁguration ﬁle.
Terraform conﬁgurations are written in HashiCorp Conﬁguration
Language (HCL). Here’s a basic example to provision an AWS EC2
instance:
</p>
<!--l. 73-->
  <div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-23001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-23008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 84--><p class="noindent" >This conﬁguration deﬁnes an AWS provider and an EC2 instance resource.
It tells Terraform to use the speciﬁed Amazon Machine Image (AMI) and
instance type.
<a 
 id="x1-23009r29"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">2.3    </span> <a 
 id="x1-240003"></a>Terraform Providers and Resources</h3>
<!--l. 88--><p class="noindent" >Providers in Terraform are responsible for managing the lifecycle of
resources. Each provider interacts with an API to manage infrastructure. In
the example above, we used the AWS provider to create an EC2
instance.
<a 
 id="x1-24001r28"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">2.3.1    </span> <a 
 id="x1-250001"></a>Conﬁguring Providers</h4>
<!--l. 92--><p class="noindent" >In Terraform, you can deﬁne multiple providers. Here’s how you can deﬁne
both AWS and Google Cloud providers in a single conﬁguration:
</p>
                                                                
                                                                
<!--l. 94-->
  <div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x1-25001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">google</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">project</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">my</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">project</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">central1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-25008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<a 
 id="x1-25009r31"></a>
<h4 class="subsectionHead"><span class="titlemark">2.3.2    </span> <a 
 id="x1-260002"></a>Resources</h4>
<!--l. 107--><p class="noindent" >Resources represent the objects you want to create or manage. Each
resource corresponds to a speciﬁc infrastructure object such as virtual
machines, storage buckets, or DNS records. Terraform manages the
lifecycle of resources through create, update, and delete operations.
<a 
 id="x1-26001r30"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">2.4    </span> <a 
 id="x1-270004"></a>Wrapping Up</h3>
<!--l. 110--><p class="noindent" >Now that you’ve installed Terraform and written your ﬁrst conﬁguration,
you’re ready to use Terraform to automate the creation and management of
your infrastructure. In the following chapters, we will delve deeper into
more advanced Terraform concepts, including working with state ﬁles,
organizing conﬁgurations, and scaling your infrastructure.
</p><!--l. 112--><p class="noindent" >With Terraform, you’ve taken the ﬁrst step towards automating infrastructure
management with clarity and purpose.
</p><!--l. 116--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore the essence of Terraform conﬁguration,</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">diving into the core principles and best practices that will help you create</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">eﬃcient and maintainable infrastructure setups.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 3</span><br /><a 
 id="x1-280003"></a>The Essence of Terraform Conﬁguration</h2>
<a 
 id="x1-28001r33"></a>
<h3 class="sectionHead"><span class="titlemark">3.1    </span> <a 
 id="x1-290001"></a>Understanding the HCL</h3>
<a 
 id="x1-29001r35"></a>
<h3 class="sectionHead"><span class="titlemark">3.2    </span> <a 
 id="x1-300002"></a>(HashiCorp Conﬁguration Language)</h3>
<!--l. 7--><p class="noindent" >HashiCorp Conﬁguration Language (HCL) is the language used by
Terraform to deﬁne resources and conﬁgurations. HCL is designed to be
both human-readable and machine-friendly, making it easier for users to
understand and maintain their infrastructure code.
</p><!--l. 9--><p class="noindent" >HCL’s syntax is declarative, meaning that you describe the desired state of
your infrastructure, and Terraform ﬁgures out how to achieve that state. It
abstracts away the complexity of cloud APIs and oﬀers a simpler, consistent
way to interact with infrastructure resources.
<a 
 id="x1-30001r32"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.2.1    </span> <a 
 id="x1-310001"></a>Basic Syntax</h4>
<!--l. 13--><p class="noindent" >Terraform conﬁgurations are structured as blocks. A block is deﬁned by a
type (e.g., ‘provider‘, ‘resource‘) followed by a label, and the block content
is enclosed in curly braces. For example, a simple resource block might
look like this:
</p>
<!--l. 15-->
  <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-31001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-31002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-31003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-31004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
                                                                
                                                                
<!--l. 22--><p class="noindent" >In this example, <span 
class="pcrr8t-x-x-120">resource </span>is the block type, <span 
class="pcrr8t-x-x-120">aws_instance </span>is the
resource type, and <span 
class="pcrr8t-x-x-120">"example" </span>is the name of the resource.
<a 
 id="x1-31005r36"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">3.3    </span> <a 
 id="x1-320003"></a>Declaring Resources</h3>
<!--l. 26--><p class="noindent" >A Terraform conﬁguration is centered around deﬁning resources. A
resource can be anything from an AWS EC2 instance to a DNS record in
Cloudﬂare. Resources are the primary way Terraform manages and
interacts with cloud infrastructure.
</p><!--l. 28--><p class="noindent" >To declare a resource, you use the ‘resource‘ block, followed by the
resource type and name. In the example below, we create an AWS EC2
instance:
</p>
<!--l. 30-->
  <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-32001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-32002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-32003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-32004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-32005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Web</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-32006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-32007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 40--><p class="noindent" >Here, <span 
class="pcrr8t-x-x-120">aws_instance </span>is the resource type, <span 
class="pcrr8t-x-x-120">web_server </span>is the resource
name, and the conﬁguration speciﬁes the AMI ID, instance type, and tags
for the instance.
<a 
 id="x1-32008r38"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">3.4    </span> <a 
 id="x1-330004"></a>Variables, Outputs, and Locals</h3>
<!--l. 44--><p class="noindent" >To make your Terraform conﬁgurations more ﬂexible and reusable, you can
use variables, outputs, and locals.
                                                                
                                                                
<a 
 id="x1-33001r37"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.4.1    </span> <a 
 id="x1-340001"></a>Variables</h4>
<!--l. 48--><p class="noindent" >Variables allow you to deﬁne values that can be reused throughout your
conﬁguration. Instead of hardcoding values, you deﬁne a variable and use it
in multiple places. For example:
</p>
<!--l. 50-->
  <div class="lstlisting" id="listing-10"><span class="label"><a 
 id="x1-34001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">variable</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">description</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">of</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">create</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">default</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="pcrr8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-34009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 62--><p class="noindent" >In this case, the ‘instance_type‘ variable is used to specify the instance type
for the EC2 instance, and its default value is t2.micro
<a 
 id="x1-34010r40"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.4.2    </span> <a 
 id="x1-350002"></a>Outputs</h4>
<!--l. 66--><p class="noindent" >Outputs are used to extract and display data from your Terraform
conﬁguration after applying it. The value of an output is formed by
referencing resources using dot notation, where each dot represents a level
of access into the resource’s attributes.
</p><!--l. 68--><p class="noindent" >The syntax follows this pattern: </p><!--l. 69-->
  <div class="lstlisting" id="listing-11"><span class="label"><a 
 id="x1-35001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">resource_type</span></span><span style="color:#000000"><span id="textcolor1"><span 
class="pcrr8t-">&gt;</span></span></span><span style="color:#000000"><span 
class="pcrr8t-">.&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">resource_name</span></span><span style="color:#000000"><span id="textcolor2"><span 
class="pcrr8t-">&gt;</span></span></span><span style="color:#000000"><span 
class="pcrr8t-">.&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">attribute</span></span><span style="color:#000000"><span id="textcolor3"><span 
class="pcrr8t-">&gt;</span></span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 75--><p class="noindent" >Here are some practical examples:
</p>
                                                                
                                                                
<!--l. 77-->
  <div class="lstlisting" id="listing-12"><span class="label"><a 
 id="x1-35004r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Basic</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">of</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">a</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">single</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">attribute</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35005r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_public_ip</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35006r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">public_ip</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35007r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35008r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35009r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">accessing</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">nested</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">attributes</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35010r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_network_interface</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35011r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">network_interface</span></span><span style="color:#000000"><span 
class="pcrr8t-">[0].</span></span><span style="color:#000000"><span 
class="pcrr8t-">network_interface_id</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35012r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35013r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35014r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">combining</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">multiple</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">values</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35015r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_details</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35016r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35017r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ip_address</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">public_ip</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35018r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">dns_name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">public_dns</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35019r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">subnet_id</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">subnet_id</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35020r17"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">17</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-35021r18"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">18</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 98--><p class="noindent" >Each dot (.) in the reference path indicates accessing a deeper level of the
resource’s attributes. For example: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 100--><p class="noindent" ><span 
class="pcrr8t-x-x-120">aws_instance </span>is the resource type
      </p></li>
      <li class="itemize">
      <!--l. 101--><p class="noindent" ><span 
class="pcrr8t-x-x-120">example </span>is the resource name
      </p></li>
      <li class="itemize">
      <!--l. 102--><p class="noindent" ><span 
class="pcrr8t-x-x-120">public_ip </span>is the attribute being accessed</p></li></ul>
<a 
 id="x1-35022r41"></a>
<h4 class="subsectionHead"><span class="titlemark">3.4.3    </span> <a 
 id="x1-360003"></a>Locals</h4>
<!--l. 107--><p class="noindent" >Locals are used to deﬁne expressions that are computed once and can be
reused throughout your conﬁguration. They are helpful for simplifying
repetitive expressions:
</p>
<!--l. 109-->
  <div class="lstlisting" id="listing-13"><span class="label"><a 
 id="x1-36001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">locals</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">server</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">$</span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">environment</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">local</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-36011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
                                                                
                                                                
<!--l. 123--><p class="noindent" >In this example, the ‘instance_name‘ local is dynamically created using the
environment variable, and it’s used in the tags for the instance.
<a 
 id="x1-36012r39"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">3.5    </span> <a 
 id="x1-370005"></a>Best Practices for Clean, Modular Code</h3>
<!--l. 127--><p class="noindent" >Writing clean and modular Terraform code is essential for maintaining
large-scale infrastructure. Following best practices will help ensure your
conﬁgurations are reusable, understandable, and easy to manage.
<a 
 id="x1-37001r42"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.5.1    </span> <a 
 id="x1-380001"></a>Use Modules for Reusability</h4>
<!--l. 131--><p class="noindent" >Modules are a powerful feature of Terraform that allows you to group
resources and reuse conﬁgurations. By using modules, you can deﬁne
common infrastructure patterns once and reuse them across diﬀerent
projects.
      </p><blockquote class="quote">
      <!--l. 134--><p class="noindent" ><span 
class="ntx-BoldItalic-tlf-t1-x-x-120">Note:  </span><span 
class="ntx-Italic-tlf-t1-x-x-120">For  more  detailed  information  on  working  with</span>
      <span 
class="ntx-Italic-tlf-t1-x-x-120">modules,  refer  to  the  chapter  on  Terraform’s  Ecosystem</span>
      <span 
class="ntx-Italic-tlf-t1-x-x-120">further down in this book.</span></p></blockquote>
<!--l. 137--><p class="noindent" >Here’s an example of a simple module that provisions an EC2 instance:
</p>
<!--l. 139-->
  <div class="lstlisting" id="listing-14"><span class="label"><a 
 id="x1-38001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">root</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-38002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">module</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-38003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">source</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">./</span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-38004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-38005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
                                                                
                                                                
<!--l. 147--><p class="noindent" >In this case, the ‘web_server‘ module is stored in the ‘./modules/web_server‘
directory, and the ‘instance_type‘ variable is passed into the module.
<a 
 id="x1-38006r44"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">3.5.2    </span> <a 
 id="x1-390002"></a>Keep Resources and Variables Organized</h4>
<!--l. 151--><p class="noindent" >Organizing your Terraform ﬁles is crucial as your conﬁguration grows. You
can group resources into diﬀerent ﬁles based on their type or function. For
example, you can separate provider conﬁgurations, resources, variables, and
outputs into diﬀerent ﬁles, making your codebase cleaner and more
manageable.
<a 
 id="x1-39001r43"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">3.6    </span> <a 
 id="x1-400006"></a>Wrapping Up</h3>
<!--l. 155--><p class="noindent" >Terraform conﬁgurations provide a simple, readable way to declare and
manage infrastructure. By understanding HCL and how to declare
resources, variables, and outputs, you can begin building infrastructure that
is scalable, repeatable, and easy to maintain.
</p><!--l. 159--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore planning and applying changes. Let’s</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 4</span><br /><a 
 id="x1-410004"></a>Planning and Applying Changes</h2>
<a 
 id="x1-41001r46"></a>
<h3 class="sectionHead"><span class="titlemark">4.1    </span> <a 
 id="x1-420001"></a>The <span 
class="pcrr8t-x-x-120">terraform plan </span>Command</h3>
<!--l. 6--><p class="noindent" >One of the core concepts in Terraform is the ability to plan and review
changes before they are applied to the infrastructure. The <span 
class="pcrr8t-x-x-120">terraform</span>
<span 
class="pcrr8t-x-x-120">plan </span>command is used to create an execution plan that shows you what
actions Terraform will take to bring your infrastructure in line with the
desired state deﬁned in your conﬁguration ﬁles.
<a 
 id="x1-42001r45"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.1.1    </span> <a 
 id="x1-430001"></a>Understanding the Plan Output</h4>
<!--l. 10--><p class="noindent" >When you run <span 
class="pcrr8t-x-x-120">terraform plan</span>, Terraform compares the current state
of your infrastructure (as recorded in the state ﬁle) with the desired state
deﬁned in your conﬁguration. It then outputs the changes that will be made.
Here’s an example of a typical output:
</p>
<!--l. 13-->
  <div class="lstlisting" id="listing-15"><span class="label"><a 
 id="x1-43001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">will</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">perform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">following</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">actions</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">+</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">computed</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">security_groups</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"1"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">security_groups</span></span><span style="color:#000000"><span 
class="pcrr8t-">.0:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">default</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">subnet_id</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">subnet</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">bb1c79de3EXAMPLE</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">private_ip</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">computed</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">public_ip</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">computed</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-">.%:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-43013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">Name</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Web</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<!--l. 29--><p class="noindent" >The output shows the resources that will be created, updated, or destroyed.
The plus sign (<img 
src="main0x.png" alt="+  "  class="math"  />) indicates a new resource will be created. If there
were a minus sign (<img 
src="main1x.png" alt="− "  class="math"  />), it would indicate a resource would be
destroyed.
<a 
 id="x1-43014r49"></a>
                                                                
                                                                
</p>
<h4 class="subsectionHead"><span class="titlemark">4.1.2    </span> <a 
 id="x1-440002"></a>Dry Run</h4>
<!--l. 33--><p class="noindent" >Running <span 
class="pcrr8t-x-x-120">terraform plan </span>is a safe &#x0022;dry run&#x0022; of the changes Terraform
will make. It does not actually modify your infrastructure but gives you an
opportunity to review the changes and ensure that they align with
your expectations. If something looks incorrect, you can adjust your
conﬁguration before applying the changes.
<a 
 id="x1-44001r48"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">4.2    </span> <a 
 id="x1-450002"></a>The <span 
class="pcrr8t-x-x-120">terraform apply </span>Command</h3>
<!--l. 37--><p class="noindent" >After reviewing the plan and ensuring that the proposed changes are
correct, the next step is to apply them. The <span 
class="pcrr8t-x-x-120">terraform apply</span>
command is used to apply the changes described in the execution plan to
your infrastructure.
<a 
 id="x1-45001r50"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.2.1    </span> <a 
 id="x1-460001"></a>Applying Changes Safely</h4>
<!--l. 41--><p class="noindent" >Before executing <span 
class="pcrr8t-x-x-120">terraform plan </span>or <span 
class="pcrr8t-x-x-120">terraform apply</span>, you’ll
typically be prompted with a summary of the changes that will be made. To
proceed, you type <span 
class="pcrr8t-x-x-120">yes</span>, conﬁrming that you want Terraform to apply the
changes. Here’s an example:
</p>
<!--l. 43-->
  <div class="lstlisting" id="listing-16"><span class="label"><a 
 id="x1-46001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Plan</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">1</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">add</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">0</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">change</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">0</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">destroy</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-46002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-46003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">Do</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">you</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">want</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">perform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">these</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">actions</span></span><span style="color:#000000"><span 
class="pcrr8t-">?</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-46004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">will</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">perform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">actions</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">described</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">above</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-46005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Only</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">’</span></span><span style="color:#000000"><span 
class="pcrr8t-">yes</span></span><span style="color:#000000"><span 
class="pcrr8t-">’</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">will</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">be</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">accepted</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">approve</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-46006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Enter</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">a</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">yes</span></span></div>
  
                                                                
                                                                
<!--l. 52--><p class="noindent" >Once you approve, Terraform will begin creating, modifying, or deleting
resources as deﬁned in your conﬁguration.
<a 
 id="x1-46007r52"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.2.2    </span> <a 
 id="x1-470002"></a>Automating <span 
class="pcrr8t-x-x-120">apply </span>in CI/CD Pipelines</h4>
<!--l. 56--><p class="noindent" >In automated workﬂows, such as continuous integration/continuous
deployment (CI/CD) pipelines, you can use the <span 
class="pcrr8t-x-x-120">-auto-approve </span>ﬂag to
skip the interactive approval and automatically apply changes:
</p>
<!--l. 58-->
  <div class="lstlisting" id="listing-17"><span class="label"><a 
 id="x1-47001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">auto</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">approve</span></span></div>
  
<!--l. 62--><p class="noindent" >While this is convenient for automated pipelines, it’s important to use it
cautiously, as it skips the safety check of user conﬁrmation.
<a 
 id="x1-47002r51"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">4.3    </span> <a 
 id="x1-480003"></a>What Happens Behind the Scenes?</h3>
<!--l. 66--><p class="noindent" >When you run <span 
class="pcrr8t-x-x-120">terraform apply</span>, Terraform performs the following
steps:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 69--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Reads the Conﬁguration: </span>Terraform reads your conﬁguration
      ﬁles to understand the desired infrastructure state.
                                                                
                                                                
      </p></li>
      <li class="itemize">
      <!--l. 70--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Compares State: </span>It compares the current state (from the state
      ﬁle) with the desired state (from the conﬁguration).
      </p></li>
      <li class="itemize">
      <!--l. 71--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Creates   an   Execution   Plan:   </span>Based   on   the   comparison,
      Terraform generates an execution plan that outlines the necessary
      actions (create, modify, delete).
      </p></li>
      <li class="itemize">
      <!--l. 72--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Applies    Changes:    </span>Terraform    communicates    with    the
      appropriate  provider  API  (e.g.,  AWS,  Azure)  to  perform  the
      actions  deﬁned  in  the  plan,  ensuring  that  the  infrastructure
      matches the desired state.
      </p></li>
      <li class="itemize">
      <!--l. 73--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Updates  State:  </span>Once  changes  are  applied,  Terraform  updates
      the state ﬁle to reﬂect the new infrastructure state.</p></li></ul>
<a 
 id="x1-48001r54"></a>
<h3 class="sectionHead"><span class="titlemark">4.4    </span> <a 
 id="x1-490004"></a>Using the <span 
class="pcrr8t-x-x-120">terraform destroy </span>Command</h3>
<!--l. 78--><p class="noindent" >If you want to tear down your infrastructure and remove all the resources
that Terraform has created, you can use the <span 
class="pcrr8t-x-x-120">terraform destroy</span>
command. This command removes all the resources deﬁned in your
Terraform conﬁguration.
</p>
<!--l. 80-->
                                                                
                                                                
  <div class="lstlisting" id="listing-18"><span class="label"><a 
 id="x1-49001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">destroy</span></span></div>
  
<!--l. 84--><p class="noindent" >You’ll be prompted to conﬁrm the destruction of your resources, similar to
<span 
class="pcrr8t-x-x-120">terraform apply</span>, to prevent accidental deletions.
<a 
 id="x1-49002r55"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">4.5    </span> <a 
 id="x1-500005"></a>Working with Multiple Environments</h3>
<!--l. 88--><p class="noindent" >In practice, you often need to manage diﬀerent environments (e.g.,
development, staging, production). Terraform allows you to work with
diﬀerent conﬁgurations for each environment, and the use of workspaces
can help organize and separate the state for each environment.
<a 
 id="x1-50001r53"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.5.1    </span> <a 
 id="x1-510001"></a>Using Workspaces</h4>
<!--l. 92--><p class="noindent" >A workspace is an isolated instance of the Terraform state. You can create,
select, and manage workspaces with the following commands:
</p>
<!--l. 94-->
  <div class="lstlisting" id="listing-19"><span class="label"><a 
 id="x1-51001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">new</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">dev</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-51002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">select</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">dev</span></span></div>
  
<!--l. 99--><p class="noindent" >Each workspace will have its own state ﬁle, allowing you to manage
diﬀerent environments without interference.
<a 
 id="x1-51003r56"></a>
</p>
                                                                
                                                                
<h3 class="sectionHead"><span class="titlemark">4.6    </span> <a 
 id="x1-520006"></a>Wrapping Up</h3>
<!--l. 103--><p class="noindent" >The <span 
class="pcrr8t-x-x-120">terraform plan </span>and <span 
class="pcrr8t-x-x-120">terraform apply </span>commands are
fundamental to the Terraform workﬂow. <span 
class="pcrr8t-x-x-120">terraform plan </span>allows you to
preview changes before applying them, ensuring that your infrastructure
remains in the desired state. <span 
class="pcrr8t-x-x-120">terraform apply </span>then executes the
changes in a safe and predictable manner. Understanding and utilizing these
commands eﬀectively is key to managing your infrastructure eﬃciently and
safely.
</p><!--l. 107--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore managing Terraform state ﬁles. Let’s</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 5</span><br /><a 
 id="x1-530005"></a>Managing State</h2>
<a 
 id="x1-53001r58"></a>
<h3 class="sectionHead"><span class="titlemark">5.1    </span> <a 
 id="x1-540001"></a>State Files and Their Importance</h3>
<!--l. 7--><p class="noindent" >In Terraform, the state ﬁle plays a crucial role in managing your
infrastructure. The state ﬁle records the current state of your infrastructure,
as well as any changes made to the resources. Terraform uses this ﬁle to
compare the desired state (deﬁned in the conﬁguration) with the actual state
(stored in the state ﬁle) during each operation.
</p><!--l. 9--><p class="noindent" >Without the state ﬁle, Terraform wouldn’t be able to track resources or
perform incremental updates. This state ﬁle is essential for managing the
lifecycle of infrastructure and ensuring that resources are created, updated,
or destroyed correctly.
<a 
 id="x1-54001r57"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.1.1    </span> <a 
 id="x1-550001"></a>Understanding the State File</h4>
<!--l. 13--><p class="noindent" >The state ﬁle, typically named <span 
class="pcrr8t-x-x-120">terraform.tfstate</span>, contains metadata
and information about every resource managed by Terraform. For
example, when you create an EC2 instance, the state ﬁle will store
details such as the instance ID, AMI, and tags. This information
allows Terraform to track the instance across diﬀerent runs of the
conﬁguration.
</p><!--l. 15--><p class="noindent" >Here’s an example snippet from a state ﬁle:
</p>
<!--l. 17-->
                                                                
                                                                
  <div class="lstlisting" id="listing-20"><span class="label"><a 
 id="x1-55001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">resources</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">type</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">",</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">",</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instances</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">",</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">i</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1234567890</span></span><span style="color:#000000"><span 
class="pcrr8t-">abcdef0</span></span><span style="color:#000000"><span 
class="pcrr8t-">",</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">",</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-55016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 36--><p class="noindent" >In this case, the state ﬁle tracks an AWS EC2 instance with the ID
<span 
class="pcrr8t-x-x-120">i-1234567890abcdef0</span>.
<a 
 id="x1-55017r60"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">5.2    </span> <a 
 id="x1-560002"></a>Backends</h3>
<!--l. 40--><p class="noindent" >Backends in Terraform are essential for storing the state ﬁle, which is
crucial for managing your infrastructure. They enable collaboration and
ensure that the state ﬁle is centralized. Backends can be local or remote,
with remote backends oﬀering additional features like state locking and
enhanced security.
<a 
 id="x1-56001r61"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.2.1    </span> <a 
 id="x1-570001"></a>Types of Backends</h4>
<!--l. 44--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Local Backend</span>: Stores the state ﬁle on the local disk. Suitable for small
projects or individual use.
</p><!--l. 46--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Remote Backends</span>: Store the state ﬁle in a remote location, allowing for
collaboration and state locking. Examples include Amazon S3 and Azure
Blob Storage.
<a 
 id="x1-57001r63"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.2.2    </span> <a 
 id="x1-580002"></a>Conﬁguring a Local Backend</h4>
<!--l. 50--><p class="noindent" >By default, Terraform uses a local backend, storing the state ﬁle in the
                                                                
                                                                
current working directory. Here’s a simple example:
</p>
<!--l. 52-->
  <div class="lstlisting" id="listing-21"><span class="label"><a 
 id="x1-58001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-58002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">backend</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">local</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-58003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">path</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tfstate</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-58004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-58005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<a 
 id="x1-58006r64"></a>
<h4 class="subsectionHead"><span class="titlemark">5.2.3    </span> <a 
 id="x1-590003"></a>Why Use Remote Backends?</h4>
<!--l. 62--><p class="noindent" >Remote backends centralize the state ﬁle, enabling collaboration and state
locking. More detailed information about conﬁguring and using remote
backends can be found in Chapter 6.
<a 
 id="x1-59001r62"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">5.3    </span> <a 
 id="x1-600003"></a>State Locking</h3>
<!--l. 66--><p class="noindent" >State locking prevents multiple Terraform processes from modifying the
state ﬁle simultaneously, ensuring consistency in a multi-user environment.
Remote backends like Amazon S3 automatically handle state locking,
preventing race conditions.
<a 
 id="x1-60001r65"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.3.1    </span> <a 
 id="x1-610001"></a>State Locking in Practice</h4>
<!--l. 70--><p class="noindent" >With state locking, if one user runs <span 
class="pcrr8t-x-x-120">terraform apply</span>, Terraform locks
the state. Another user attempting the same will receive an error indicating
the state is locked:
</p>
                                                                
                                                                
<!--l. 72-->
  <div class="lstlisting" id="listing-22"><span class="label"><a 
 id="x1-61001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">locking</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">acquiring</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">lock</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ConditionalCheckFailedException</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">The</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">conditional</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">request</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">failed</span></span></div>
  
<!--l. 76--><p class="noindent" >The ﬁrst user to acquire the lock can proceed, while others must wait for the
lock to be released.
<a 
 id="x1-61002r66"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">5.4    </span> <a 
 id="x1-620004"></a>Managing State with <span 
class="pcrr8t-x-x-120">terraform state</span></h3>
<!--l. 80--><p class="noindent" >In addition to <span 
class="pcrr8t-x-x-120">terraform plan </span>and <span 
class="pcrr8t-x-x-120">terraform apply</span>, Terraform
provides several commands for managing the state ﬁle directly. The
<span 
class="pcrr8t-x-x-120">terraform state </span>command allows you to query, manipulate, and
inspect the state ﬁle.
<a 
 id="x1-62001r67"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.4.1    </span> <a 
 id="x1-630001"></a>Viewing the State</h4>
<!--l. 84--><p class="noindent" >To view the current state of your infrastructure, use the following
command:
</p>
<!--l. 86-->
  <div class="lstlisting" id="listing-23"><span class="label"><a 
 id="x1-63001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span></div>
  
<!--l. 90--><p class="noindent" >This command will list all the resources that Terraform is currently
managing.
<a 
 id="x1-63002r69"></a>
                                                                
                                                                
</p>
<h4 class="subsectionHead"><span class="titlemark">5.4.2    </span> <a 
 id="x1-640002"></a>Modifying the State</h4>
<!--l. 94--><p class="noindent" >You can also use <span 
class="pcrr8t-x-x-120">terraform state </span>to modify the state ﬁle
directly. For example, if a resource is manually changed outside
of Terraform (e.g., manually deleting a server), you can use the
<span 
class="pcrr8t-x-x-120">terraform state rm </span>command to remove the resource from the state
ﬁle:
</p>
<!--l. 96-->
  <div class="lstlisting" id="listing-24"><span class="label"><a 
 id="x1-64001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">rm</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span></div>
  
<!--l. 100--><p class="noindent" >This removes the resource from Terraform’s state ﬁle, meaning Terraform
will no longer track it, and no further changes will be made to that resource
until it’s reintroduced to the conﬁguration.
<a 
 id="x1-64002r68"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">5.5    </span> <a 
 id="x1-650005"></a>State File Security</h3>
<!--l. 104--><p class="noindent" >Since the state ﬁle contains sensitive information, such as resource IDs,
secrets, and other conﬁgurations, it’s critical to secure it. When storing state
ﬁles remotely, ensure that access is restricted to only those who need it. For
example, when using Amazon S3, use IAM policies to control access to the
bucket storing the state ﬁle.
</p><!--l. 106--><p class="noindent" >Additionally, use encryption at rest and in transit to protect the state ﬁle.
Many remote backends, including Amazon S3 and Azure Blob Storage,
provide automatic encryption features to secure your state.
                                                                
                                                                
<a 
 id="x1-65001r71"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">5.6    </span> <a 
 id="x1-660006"></a>State File Backups</h3>
<!--l. 110--><p class="noindent" >While Terraform manages the state ﬁle, it’s always a good practice to
maintain backups of your state ﬁle, especially when working with
large infrastructure setups. Remote backends like Amazon S3 and
Azure Blob Storage automatically create backups, but you should still
consider implementing additional backup strategies based on your
needs.
<a 
 id="x1-66001r72"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">5.7    </span> <a 
 id="x1-670007"></a>Conclusion</h3>
<!--l. 114--><p class="noindent" >Terraform’s state management is a powerful feature that enables it to track
resources across multiple runs. By using remote backends, state locking,
and proper security practices, you can collaborate safely and eﬃciently with
your team. Understanding how Terraform handles state, and using
<span 
class="pcrr8t-x-x-120">terraform state </span>commands to inspect and modify the state ﬁle, is
essential for managing large-scale infrastructure.
</p><!--l. 116--><p class="noindent" >In the next chapter, we will explore best practices for organizing and scaling
your Terraform conﬁgurations to handle complex environments.
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 6</span><br /><a 
 id="x1-680006"></a>Organizing Terraform Conﬁgurations</h2>
<a 
 id="x1-68001r73"></a>
<h3 class="sectionHead"><span class="titlemark">6.1    </span> <a 
 id="x1-690001"></a>Why Organizing Terraform Conﬁgurations Matters</h3>
<!--l. 6--><p class="noindent" >As your infrastructure grows, so does the complexity of your Terraform
conﬁgurations. Organizing your conﬁgurations in a logical, modular way is
essential for maintainability, scalability, and collaboration. Proper
organization ensures that your codebase remains clean, reusable, and easy
to navigate.
</p><!--l. 8--><p class="noindent" >Terraform encourages modularity, allowing you to structure your
conﬁguration ﬁles in a way that supports multiple environments
and a scalable architecture. In this chapter, we will discuss best
practices for organizing your Terraform conﬁgurations, using modules,
and ensuring that your code is maintainable as your infrastructure
expands.
<a 
 id="x1-69001r75"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">6.2    </span> <a 
 id="x1-700002"></a>Using Modules for Reusability</h3>
<!--l. 12--><p class="noindent" >Modules are a fundamental concept in Terraform. A module is a container
for multiple resources that are used together. By organizing your
resources into reusable modules, you can avoid duplicating code
and ensure that the infrastructure you deploy is consistent across
environments.
<a 
 id="x1-70001r70"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">6.2.1    </span> <a 
 id="x1-710001"></a>What is a Module?</h4>
<!--l. 16--><p class="noindent" >A Terraform module is simply a collection of Terraform conﬁguration ﬁles
in a directory. The module can contain resources, variables, outputs, and
other conﬁguration elements, making it self-contained and reusable.
Modules allow you to encapsulate complex logic into smaller, manageable
pieces of code.
<a 
 id="x1-71001r77"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">6.2.2    </span> <a 
 id="x1-720002"></a>Creating and Using Modules</h4>
<!--l. 20--><p class="noindent" >Here’s an example of how to create and use a simple module to manage an
AWS EC2 instance. First, create a directory for the module:
</p>
<!--l. 22-->
  <div class="lstlisting" id="listing-25"><span class="label"><a 
 id="x1-72001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">mkdir</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">p</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span></div>
  
<!--l. 26--><p class="noindent" >Then, inside the <span 
class="pcrr8t-x-x-120">modules/web_server </span>directory, deﬁne a Terraform
ﬁle to create an EC2 instance:
</p>
<!--l. 28-->
  <div class="lstlisting" id="listing-26"><span class="label"><a 
 id="x1-72002r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72003r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72004r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72005r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72006r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72007r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72008r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72009r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 39--><p class="noindent" >The module takes three variables: <span 
class="pcrr8t-x-x-120">ami</span>, <span 
class="pcrr8t-x-x-120">instance_type</span>, and
<span 
class="pcrr8t-x-x-120">instance_name</span>. Now, you can use this module in your main
conﬁguration:
</p>
                                                                
                                                                
<!--l. 43-->
  <div class="lstlisting" id="listing-27"><span class="label"><a 
 id="x1-72010r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72011r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrb8t-">module</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72012r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">source</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">./</span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72013r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72014r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72015r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">WebServerInstance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-72016r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 53--><p class="noindent" >This approach allows you to reuse the module across diﬀerent environments
or projects by simply adjusting the variables passed to it.
<a 
 id="x1-72017r76"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">6.3    </span> <a 
 id="x1-730003"></a>Organizing Conﬁguration Files</h3>
<!--l. 57--><p class="noindent" >As your Terraform conﬁguration grows, it becomes important to organize
your ﬁles into logical groups. While there’s no strict rule for how to
organize your ﬁles, the following practices can help you maintain clarity
and structure.
<a 
 id="x1-73001r78"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">6.3.1    </span> <a 
 id="x1-740001"></a>Separate Files for Providers, Resources, and Variables</h4>
<!--l. 61--><p class="noindent" >It is common to split your conﬁguration into separate ﬁles to enhance
readability and maintainability:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 64--><p class="noindent" ><span 
class="pcrr8t-x-x-120">provider.tf</span>: This ﬁle contains the provider conﬁguration,
      specifying the provider you are using (e.g., AWS, Azure, GCP).
      </p></li>
      <li class="itemize">
      <!--l. 65--><p class="noindent" ><span 
class="pcrr8t-x-x-120">resources.tf</span>: This ﬁle contains all the resource deﬁnitions
                                                                
                                                                
      that   describe   your   infrastructure,   such   as   EC2   instances,
      databases, and networking components.
      </p></li>
      <li class="itemize">
      <!--l. 66--><p class="noindent" ><span 
class="pcrr8t-x-x-120">variables.tf</span>: This ﬁle contains all the variable deﬁnitions
      that allow you to make your conﬁguration dynamic and reusable.
      </p></li>
      <li class="itemize">
      <!--l. 67--><p class="noindent" ><span 
class="pcrr8t-x-x-120">outputs.tf</span>: This ﬁle contains output variables that are used
      to expose useful information from your infrastructure, such as
      IP addresses, instance IDs, and other relevant data.</p></li></ul>
<!--l. 70--><p class="noindent" >This structure makes it easy to maintain and extend your conﬁguration as
your infrastructure grows.
<a 
 id="x1-74001r80"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">6.3.2    </span> <a 
 id="x1-750002"></a>Example Directory Structure</h4>
<!--l. 74--><p class="noindent" >Here’s an example of how to organize your Terraform project:
</p>
<!--l. 76-->
  <div class="lstlisting" id="listing-28"><span class="label"><a 
 id="x1-75001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">project</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">resources</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">variables</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">outputs</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">‘--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">‘--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-75010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">‘--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">variables</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span></div>
  
<!--l. 89--><p class="noindent" >This structure helps keep each part of the conﬁguration separate and
organized, making it easier to understand and modify.
<a 
 id="x1-75011r79"></a>
                                                                
                                                                
</p>
<h3 class="sectionHead"><span class="titlemark">6.4    </span> <a 
 id="x1-760004"></a>Working with Workspaces for Multiple Environments</h3>
<!--l. 93--><p class="noindent" >In a multi-environment setup (e.g., development, staging, production),
Terraform Workspaces help you manage state ﬁles for each environment
without requiring separate conﬁgurations. Workspaces allow you to
switch between diﬀerent sets of state ﬁles and manage resources
independently.
<a 
 id="x1-76001r81"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">6.4.1    </span> <a 
 id="x1-770001"></a>Creating and Managing Workspaces</h4>
<!--l. 97--><p class="noindent" >To create a new workspace, use the following command:
</p>
<!--l. 99-->
  <div class="lstlisting" id="listing-29"><span class="label"><a 
 id="x1-77001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">new</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">dev</span></span></div>
  
<!--l. 103--><p class="noindent" >This will create a workspace named <span 
class="pcrr8t-x-x-120">dev</span>. To switch between workspaces,
use:
</p>
<!--l. 105-->
  <div class="lstlisting" id="listing-30"><span class="label"><a 
 id="x1-77002r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">select</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">dev</span></span></div>
  
<!--l. 109--><p class="noindent" >You can list all available workspaces with the following command:
</p>
<!--l. 111-->
                                                                
                                                                
  <div class="lstlisting" id="listing-31"><span class="label"><a 
 id="x1-77003r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span></div>
  
<!--l. 115--><p class="noindent" >Each workspace has its own state ﬁle, so the resources in one workspace
will not aﬀect those in another.
<a 
 id="x1-77004r83"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">6.4.2    </span> <a 
 id="x1-780002"></a>Using Workspaces in the Conﬁguration</h4>
<!--l. 119--><p class="noindent" >In your conﬁguration, you can refer to the workspace name to customize
settings based on the environment. For example, you can use the workspace
name to assign diﬀerent instance types or conﬁgurations for development
and production environments:
</p>
<!--l. 121-->
  <div class="lstlisting" id="listing-32"><span class="label"><a 
 id="x1-78001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-78002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-78003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrb8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">==</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">dev</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">?</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">large</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-78004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 128--><p class="noindent" >In this example, the instance type will be <span 
class="pcrr8t-x-x-120">t2.micro </span>in the <span 
class="pcrr8t-x-x-120">dev </span>workspace
and <span 
class="pcrr8t-x-x-120">t2.large </span>in any other workspace.
<a 
 id="x1-78005r82"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">6.5    </span> <a 
 id="x1-790005"></a>Using Backend Conﬁgurations for Centralized State</h3>
<!--l. 132--><p class="noindent" >For teams and large projects, storing the state remotely is crucial. Terraform
supports multiple backends, such as Amazon S3, Azure Blob Storage, and
Google Cloud Storage, to store and manage the state ﬁle. By conﬁguring a
backend, you centralize your state and enable collaboration without
                                                                
                                                                
conﬂicts.
<a 
 id="x1-79001r84"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">6.5.1    </span> <a 
 id="x1-800001"></a>Conﬁguring a Remote Backend</h4>
<!--l. 136--><p class="noindent" >Remote backends not only centralize the state ﬁle but also provide
additional features like state locking and encryption. Here’s how to
conﬁgure a remote backend using Amazon S3 as an example:
      </p><dl class="enumerate-enumitem"><dt class="enumerate-enumitem">
   1. </dt><dd 
class="enumerate-enumitem"><span 
class="ntx-Bold-tlf-t1-x-x-120">Create an S3 Bucket</span>: First, create an S3 bucket in your AWS
      account to store the Terraform state ﬁle. Ensure that the bucket
      is in a region that supports your infrastructure needs.
      </dd><dt class="enumerate-enumitem">
   2. </dt><dd 
class="enumerate-enumitem"><span 
class="ntx-Bold-tlf-t1-x-x-120">Set Up a DynamoDB Table for State Locking</span>: To enable state
      locking, create a DynamoDB table. This table will be used to
      manage locks and prevent concurrent operations on the state ﬁle.
      </dd><dt class="enumerate-enumitem">
   3. </dt><dd 
class="enumerate-enumitem"><span 
class="ntx-Bold-tlf-t1-x-x-120">Conﬁgure  the  Backend  in  Terraform</span>:  Add  the  following
      conﬁguration to your Terraform ﬁles to use the S3 bucket and
      DynamoDB table:
      <!--l. 145-->
        <div class="lstlisting" id="listing-33"><span class="label"><a 
 id="x1-80004r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrb8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80005r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">backend</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">s3</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80006r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">bucket</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">my</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80007r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">key</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">global</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">s3</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tfstate</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80008r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80009r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">encrypt</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">true</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80010r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">dynamodb_table</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">lock</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80011r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-80012r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
        
      <!--l. 157--><p class="noindent" >This conﬁguration speciﬁes the S3 bucket and key for the state ﬁle,
      enables encryption, and sets the DynamoDB table for state
      locking.
      </p></dd><dt class="enumerate-enumitem">
   4. </dt><dd 
class="enumerate-enumitem"><span 
class="ntx-Bold-tlf-t1-x-x-120">Initialize the Backend</span>: Run the following command to initialize the
      backend conﬁguration:
                                                                
                                                                
      <!--l. 161-->
        <div class="lstlisting" id="listing-34"><span class="label"><a 
 id="x1-80014r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">init</span></span></div>
        
      <!--l. 165--><p class="noindent" >This command will conﬁgure Terraform to use the speciﬁed
      remote backend, migrating any existing local state to the remote
      storage.
      </p></dd><dt class="enumerate-enumitem">
   5. </dt><dd 
class="enumerate-enumitem"><span 
class="ntx-Bold-tlf-t1-x-x-120">Verify the Setup</span>: After initialization, verify that the state ﬁle is
      stored in the S3 bucket and that state locking is functioning correctly
      by attempting concurrent operations.</dd></dl>
<a 
 id="x1-80016r86"></a>
<h4 class="subsectionHead"><span class="titlemark">6.5.2    </span> <a 
 id="x1-810002"></a>Other Backend Types</h4>
<!--l. 172--><p class="noindent" >In addition to S3, Terraform supports various other backends, each with its
own features and use cases. For example, Azure Blob Storage can be used
for teams working in Azure environments, while HashiCorp Consul can be
used for more complex setups requiring service discovery and conﬁguration
management.
</p><!--l. 174--><p class="noindent" >Choosing the right backend depends on your team’s needs, infrastructure,
and security requirements. Each backend type oﬀers diﬀerent capabilities,
so it’s important to evaluate them based on your speciﬁc use case.
<a 
 id="x1-81001r85"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">6.6    </span> <a 
 id="x1-820006"></a>Wrapping Up</h3>
<!--l. 178--><p class="noindent" >Organizing your Terraform conﬁgurations is key to building scalable,
maintainable infrastructure. By using modules, keeping conﬁgurations
                                                                
                                                                
modular, and utilizing workspaces for diﬀerent environments, you can
structure your infrastructure in a way that is easy to manage and
extend.
</p><!--l. 182--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore collaboration and versioning in</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform. Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 7</span><br /><a 
 id="x1-830007"></a>Collaboration and Version Control</h2>
<a 
 id="x1-83001r88"></a>
<h3 class="sectionHead"><span class="titlemark">7.1    </span> <a 
 id="x1-840001"></a>Versioning Terraform and Providers</h3>
<!--l. 6--><p class="noindent" >Terraform conﬁgurations are just code, and like any other code, they
should be versioned to ensure that changes are tracked and reversible.
Versioning allows teams to collaborate, rollback changes, and keep track
of infrastructure evolution over time. Terraform’s integration with
version control systems (VCS) like Git makes it easy to manage
conﬁgurations.
<a 
 id="x1-84001r87"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.1.1    </span> <a 
 id="x1-850001"></a>Versioning Terraform Conﬁgurations</h4>
<!--l. 10--><p class="noindent" >Each change made to a Terraform conﬁguration should be committed to a
version control system (VCS) such as Git. By doing so, you create a history
of changes that can be easily reviewed, reverted, and collaborated on by
others.
</p><!--l. 12--><p class="noindent" >For example, you might structure your Git repository as follows:
</p>
<!--l. 14-->
  <div class="lstlisting" id="listing-35"><span class="label"><a 
 id="x1-85001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">project</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Main</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">file</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">where</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">resources</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">are</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">defined</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">file</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">specifying</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">cloud</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">details</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">variables</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Variables</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">file</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">where</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">input</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">variables</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">are</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">declared</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">resources</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Resources</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">file</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">where</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">infrastructure</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">resources</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">are</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">defined</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">|--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">outputs</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Outputs</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">file</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">where</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">values</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">are</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">defined</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">‘--</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">gitignore</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Gitignore</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">file</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">exclude</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">sensitive</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">files</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">from</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">version</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">control</span></span></div>
  
<!--l. 24--><p class="noindent" >The ‘.gitignore‘ ﬁle is important to exclude sensitive ﬁles like state ﬁles,
which shouldn’t be committed to the repository. Here’s an example of a
‘.gitignore‘ ﬁle:
                                                                
                                                                
</p>
<!--l. 26-->
  <div class="lstlisting" id="listing-36"><span class="label"><a 
 id="x1-85008r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Ignore</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">local</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">files</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85009r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">*.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tfstate</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85010r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">*.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tfstate</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">backup</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85011r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Ignore</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">directory</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-85012r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span></div>
  
<!--l. 34--><p class="noindent" >By versioning your conﬁguration ﬁles and using Git, you can easily
collaborate with teammates, review changes through pull requests, and
track which changes were made and why.
<a 
 id="x1-85013r91"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.1.2    </span> <a 
 id="x1-860002"></a>Versioning Terraform Providers</h4>
<!--l. 38--><p class="noindent" >Terraform uses providers to interact with external APIs, such as AWS,
Google Cloud, and Azure. It is important to pin provider versions in
your conﬁguration to avoid breaking changes when a new version is
released.
</p><!--l. 40--><p class="noindent" >To pin the version of a provider, specify the version in the provider
block:
</p>
<!--l. 42-->
  <div class="lstlisting" id="listing-37"><span class="label"><a 
 id="x1-86001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-86002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-86003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">version</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">~</span></span><span style="color:#000000"><span id="textcolor4"><span 
class="pcrr8t-">&gt;</span></span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">3.0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-86004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 49--><p class="noindent" >In this example, Terraform will use version 3.x of the AWS provider. The ‘ 
&#x003E; 3.0‘ version constraint ensures that Terraform will use the latest patch
version in the 3.x series, preventing potential breaking changes from newer
major versions.
<a 
 id="x1-86005r90"></a>
                                                                
                                                                
</p>
<h3 class="sectionHead"><span class="titlemark">7.2    </span> <a 
 id="x1-870002"></a>Collaboration with Git</h3>
<!--l. 53--><p class="noindent" >In a team environment, Terraform conﬁgurations should be stored in a
shared Git repository to allow multiple team members to collaborate.
Each change to the infrastructure is made via pull requests, which
are reviewed by team members before being merged into the main
branch.
<a 
 id="x1-87001r92"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.2.1    </span> <a 
 id="x1-880001"></a>Creating Branches for Features</h4>
<!--l. 57--><p class="noindent" >When adding a new feature, such as creating a new resource or updating an
existing one, it is best practice to create a separate Git branch. This allows
the team to work on multiple features simultaneously without interfering
with each other’s work.
</p><!--l. 59--><p class="noindent" >For example:
</p>
<!--l. 61-->
  <div class="lstlisting" id="listing-38"><span class="label"><a 
 id="x1-88001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">git</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">checkout</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">b</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">add</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">new</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">ec2</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span></div>
  
<!--l. 65--><p class="noindent" >This command creates a new branch for adding a new EC2 instance to the
infrastructure. After making changes, commit and push them to the remote
repository for review:
</p>
<!--l. 67-->
  <div class="lstlisting" id="listing-39"><span class="label"><a 
 id="x1-88002r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">git</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">add</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-88003r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">git</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">commit</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">m</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Add</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">new</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">EC2</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-88004r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">git</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">push</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">origin</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">add</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">new</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">ec2</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span></div>
                                                                
                                                                
  
<!--l. 73--><p class="noindent" >Pull requests (PRs) can then be created from this branch, and other team
members can review the changes before merging them into the main
branch.
<a 
 id="x1-88005r94"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.2.2    </span> <a 
 id="x1-890002"></a>Merging and Deploying Changes</h4>
<!--l. 77--><p class="noindent" >Once the pull request is reviewed and approved, it can be merged into the
main branch. Before applying any changes, it’s important to run
<span 
class="pcrr8t-x-x-120">terraform plan </span>and <span 
class="pcrr8t-x-x-120">terraform apply </span>to ensure that the
proposed changes will not cause any issues.
</p><!--l. 79--><p class="noindent" >For example, you can use the following commands to plan and apply the
changes:
</p>
<!--l. 81-->
  <div class="lstlisting" id="listing-40"><span class="label"><a 
 id="x1-89001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">plan</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-89002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span></div>
  
<!--l. 86--><p class="noindent" >By following this process, you ensure that the infrastructure changes are
safe, tested, and reviewed before they are applied to the production
environment.
<a 
 id="x1-89003r93"></a>
</p>
                                                                
                                                                
<h3 class="sectionHead"><span class="titlemark">7.3    </span> <a 
 id="x1-900003"></a>Managing Remote State for Teams</h3>
<!--l. 90--><p class="noindent" >When working in teams, managing Terraform’s state ﬁle is crucial. If
multiple team members are working on the same infrastructure, they need
to ensure that they don’t overwrite each other’s changes or cause conﬂicts in
the state ﬁle.
<a 
 id="x1-90001r95"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.3.1    </span> <a 
 id="x1-910001"></a>Using Remote Backends for Collaboration</h4>
<!--l. 94--><p class="noindent" >As discussed in previous chapters, it is highly recommended to store the
state ﬁle remotely. By doing so, you centralize the state, allowing multiple
users to work on the same infrastructure without conﬂicts. For example, you
can conﬁgure a remote backend using Amazon S3 or HashiCorp
Consul.
</p>
<!--l. 96-->
  <div class="lstlisting" id="listing-41"><span class="label"><a 
 id="x1-91001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-91002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">backend</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">s3</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-91003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">bucket</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">my</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-91004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">key</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">global</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">s3</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tfstate</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-91005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-91006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-91007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 106--><p class="noindent" >With a remote backend, Terraform automatically locks the state ﬁle when
it’s being modiﬁed, preventing multiple users from changing the state ﬁle
simultaneously. This is essential for team collaboration.
<a 
 id="x1-91008r97"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.3.2    </span> <a 
 id="x1-920002"></a>State Locking and Consistency</h4>
<!--l. 110--><p class="noindent" >When using remote backends, state locking ensures that only one person
can modify the infrastructure at a time. If one user is applying changes,
                                                                
                                                                
others will be blocked from making changes until the operation
completes.
</p><!--l. 112--><p class="noindent" >For example, if two team members try to apply changes simultaneously, one
will receive an error stating that the state is locked:
</p>
<!--l. 114-->
  <div class="lstlisting" id="listing-42"><span class="label"><a 
 id="x1-92001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">locking</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">acquiring</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">lock</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ConditionalCheckFailedException</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">The</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">conditional</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">request</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">failed</span></span></div>
  
<!--l. 118--><p class="noindent" >The user who holds the lock will proceed with the operation, and the other
will have to wait until the lock is released.
<a 
 id="x1-92002r96"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">7.4    </span> <a 
 id="x1-930004"></a>Best Practices for Collaboration</h3>
<!--l. 122--><p class="noindent" >When collaborating on Terraform conﬁgurations, it’s important to follow
best practices to ensure that your work is consistent, maintainable, and easy
to review. Some of these best practices include:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 125--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Version  control  all  conﬁguration  ﬁles</span>:  Store  all  Terraform
      conﬁguration ﬁles in a version-controlled Git repository.
      </p></li>
      <li class="itemize">
      <!--l. 126--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Use  modules</span>:  Break  down  your  conﬁguration  into  reusable
      modules to promote reusability and maintainability.
                                                                
                                                                
      </p></li>
      <li class="itemize">
      <!--l. 127--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Pin provider versions</span>: Always specify the provider versions in
      your conﬁguration to avoid breaking changes.
      </p></li>
      <li class="itemize">
      <!--l. 128--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Review pull requests</span>: Use pull requests to review changes and
      ensure  that  the  infrastructure  changes  are  safe  and  meet  the
      team’s standards.
      </p></li>
      <li class="itemize">
      <!--l. 129--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Store state remotely</span>: Use remote backends to store the state ﬁle
      and ensure that it is securely managed.
      </p></li>
      <li class="itemize">
      <!--l. 130--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Automate  infrastructure  deployments</span>:  Integrate  Terraform
      with  CI/CD  pipelines  to  automate  testing  and  deployment  of
      infrastructure changes.</p></li></ul>
<a 
 id="x1-93001r99"></a>
<h3 class="sectionHead"><span class="titlemark">7.5    </span> <a 
 id="x1-940005"></a>Wrapping Up</h3>
<!--l. 135--><p class="noindent" >Version control and collaboration are key components of managing
Terraform conﬁgurations in a team environment. By versioning your code
with Git, using remote backends for state management, and following best
practices, you can ensure that your infrastructure is managed eﬃciently,
safely, and collaboratively.
</p><!--l. 139--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore secrets management and security in</span>
                                                                
                                                                
<span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform. Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 8</span><br /><a 
 id="x1-950008"></a>Secrets Management and Security</h2>
<a 
 id="x1-95001r100"></a>
<h3 class="sectionHead"><span class="titlemark">8.1    </span> <a 
 id="x1-960001"></a>Managing Sensitive Data Securely</h3>
<!--l. 6--><p class="noindent" >In Terraform, it’s important to handle sensitive data such as API keys,
passwords, and private keys securely. Terraform itself does not provide
native mechanisms to store secrets, but it oﬀers integrations with external
systems and tools to help you manage secrets securely.
</p><!--l. 8--><p class="noindent" >One of the key principles when managing secrets is to never hardcode
sensitive information directly in your conﬁguration ﬁles. Instead, sensitive
data should be retrieved from secure storage systems like HashiCorp Vault,
AWS Secrets Manager, or environment variables.
<a 
 id="x1-96001r98"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">8.1.1    </span> <a 
 id="x1-970001"></a>Using Environment Variables</h4>
<!--l. 12--><p class="noindent" >Managing secrets in Terraform can be eﬀectively done using environment
variables, which keep sensitive data outside of conﬁguration ﬁles. For
instance, AWS credentials can be set as environment variables:
</p>
<!--l. 14-->
  <div class="lstlisting" id="listing-43"><span class="label"><a 
 id="x1-97001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">export</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS_ACCESS_KEY_ID</span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">your</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">access</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">key</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">export</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS_SECRET_ACCESS_KEY</span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">your</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">secret</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">access</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">key</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<!--l. 19--><p class="noindent" >These variables can be referenced in Terraform conﬁgurations without
exposing them directly in the code:
</p>
                                                                
                                                                
<!--l. 21-->
  <div class="lstlisting" id="listing-44"><span class="label"><a 
 id="x1-97003r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97004r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97005r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">access_key</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS_ACCESS_KEY_ID</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97006r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">secret_key</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS_SECRET_ACCESS_KEY</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97007r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 29--><p class="noindent" >Additionally, Terraform supports environment variables preﬁxed with
<span 
class="pcrr8t-x-x-120">TF_VARS_ </span>to set input variables. For example, setting a variable for a
database password:
</p>
<!--l. 31-->
  <div class="lstlisting" id="listing-45"><span class="label"><a 
 id="x1-97008r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">export</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">TF_VARS_db_password</span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">your</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">db</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">password</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<!--l. 35--><p class="noindent" >This variable can be used in your Terraform conﬁguration as follows:
</p>
<!--l. 37-->
  <div class="lstlisting" id="listing-46"><span class="label"><a 
 id="x1-97009r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">variable</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">db_password</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97010r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97011r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_db_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97012r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">password</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">db_password</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-97013r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 45--><p class="noindent" >In this setup, <span 
class="pcrr8t-x-x-120">TF_VARS_db_password </span>is automatically mapped to the
<span 
class="pcrr8t-x-x-120">db_password </span>variable, ensuring sensitive data remains secure and
outside of the conﬁguration ﬁles.
<a 
 id="x1-97014r102"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">8.2    </span> <a 
 id="x1-980002"></a>Using HashiCorp Vault for Secrets</h3>
<!--l. 49--><p class="noindent" >HashiCorp Vault is a tool designed to securely store and access secrets. It
provides advanced features like encryption, dynamic secrets, and access
control to ensure that sensitive data is protected.
<a 
 id="x1-98001r103"></a>
                                                                
                                                                
</p>
<h4 class="subsectionHead"><span class="titlemark">8.2.1    </span> <a 
 id="x1-990001"></a>Integrating Terraform with Vault</h4>
<!--l. 53--><p class="noindent" >To integrate Vault with Terraform, you must conﬁgure the <span 
class="pcrr8t-x-x-120">vault </span>provider
in your Terraform conﬁguration. First, ensure that Vault is running and that
you have appropriate access credentials.
</p><!--l. 55--><p class="noindent" >Here’s an example of how to conﬁgure the Vault provider:
</p>
<!--l. 57-->
  <div class="lstlisting" id="listing-47"><span class="label"><a 
 id="x1-99001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">vault</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">address</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">https</span></span><span style="color:#000000"><span 
class="pcrr8t-">://</span></span><span style="color:#000000"><span 
class="pcrr8t-">vault</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">com</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">token</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">vault_token</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 64--><p class="noindent" >Once the Vault provider is conﬁgured, you can retrieve secrets from
Vault. For example, to fetch a secret from Vault’s KV (Key-Value)
store:
</p>
<!--l. 66-->
  <div class="lstlisting" id="listing-48"><span class="label"><a 
 id="x1-99005r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">data</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">vault_generic_secret</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99006r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">path</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">secret</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">myapp</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">api_key</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99007r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99008r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99009r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrb8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">api_key</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99010r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">data</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">vault_generic_secret</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">data</span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">api_key</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-99011r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 76--><p class="noindent" >In this example, Terraform fetches the secret stored at <span 
class="pcrr8t-x-x-120">secret/myapp/api_key</span>
from Vault, and the secret is available as an output variable.
<a 
 id="x1-99012r105"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">8.2.2    </span> <a 
 id="x1-1000002"></a>Access Control in Vault</h4>
<!--l. 80--><p class="noindent" >Vault provides ﬁne-grained access control through policies. These policies
specify who can access certain secrets and what actions they can perform.
                                                                
                                                                
You can deﬁne policies in HCL or JSON, and assign them to speciﬁc users
or applications.
</p><!--l. 82--><p class="noindent" >Here’s an example of a Vault policy that allows read access to secrets under
the <span 
class="pcrr8t-x-x-120">secret/myapp/ </span>path:
</p>
<!--l. 84-->
  <div class="lstlisting" id="listing-49"><span class="label"><a 
 id="x1-100001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">path</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">secret</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">myapp</span></span><span style="color:#000000"><span 
class="pcrr8t-">/*</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-100002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">capabilities</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">read</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-100003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 90--><p class="noindent" >You can then associate this policy with a Vault token to grant access to the
secrets.
<a 
 id="x1-100004r104"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">8.3    </span> <a 
 id="x1-1010003"></a>Securing Terraform State Files</h3>
<!--l. 94--><p class="noindent" >Since Terraform state ﬁles contain sensitive information about the resources
it manages, it is crucial to protect them. The state ﬁle contains not only the
resource deﬁnitions but also metadata such as passwords and private keys
that Terraform uses to manage resources.
<a 
 id="x1-101001r106"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">8.3.1    </span> <a 
 id="x1-1020001"></a>Remote Backends with Encryption</h4>
<!--l. 98--><p class="noindent" >When storing Terraform state remotely (such as in Amazon S3 or Azure
Blob Storage), you should enable encryption to protect the state ﬁle both at
rest and in transit. For example, when using Amazon S3 as a backend, you
can enable encryption like this:
</p>
                                                                
                                                                
<!--l. 100-->
  <div class="lstlisting" id="listing-50"><span class="label"><a 
 id="x1-102001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">backend</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">s3</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">bucket</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">my</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">key</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">global</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">s3</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tfstate</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">encrypt</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">true</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-102008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 111--><p class="noindent" >This ensures that the state ﬁle is encrypted at rest in S3. Similarly, when
using other backends like Azure or Google Cloud Storage, you should
enable their respective encryption options.
<a 
 id="x1-102009r108"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">8.3.2    </span> <a 
 id="x1-1030002"></a>State File Permissions</h4>
<!--l. 115--><p class="noindent" >To protect the state ﬁle, ensure that only authorized users can access it. If
you are using a remote backend like S3 or Google Cloud Storage, you can
conﬁgure access controls (e.g., AWS IAM roles) to restrict who can read or
write the state ﬁle.
<a 
 id="x1-103001r107"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">8.4    </span> <a 
 id="x1-1040004"></a>Managing Secrets in CI/CD Pipelines</h3>
<!--l. 119--><p class="noindent" >In automated workﬂows, especially when using continuous integration and
deployment (CI/CD) pipelines, it is essential to handle secrets securely.
CI/CD tools like Jenkins, GitLab CI, and GitHub Actions provide ways to
securely inject secrets into the pipeline at runtime, ensuring that sensitive
information is never stored in the version control system or exposed in
logs.
<a 
 id="x1-104001r109"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">8.4.1    </span> <a 
 id="x1-1050001"></a>Using GitLab CI for Secrets Management</h4>
<!--l. 123--><p class="noindent" >In GitLab CI, you can deﬁne secrets as environment variables in
the GitLab UI or in the ‘.gitlab-ci.yml‘ conﬁguration ﬁle. These
secrets are automatically injected into the pipeline environment during
execution.
</p><!--l. 125--><p class="noindent" >Here’s an example of how to use environment variables in a GitLab CI
pipeline:
</p>
<!--l. 127-->
  <div class="lstlisting" id="listing-51"><span class="label"><a 
 id="x1-105001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">stages</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor5"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">stage</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">script</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor6"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">init</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor7"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">auto</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">approve</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">only</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-105010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor8"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">master</span></span></div>
  
<!--l. 140--><p class="noindent" >In this example, GitLab CI injects the secrets stored as environment
variables into the pipeline during execution, and Terraform uses them to
manage infrastructure.
<a 
 id="x1-105011r111"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">8.4.2    </span> <a 
 id="x1-1060002"></a>Secrets in GitHub Actions</h4>
<!--l. 144--><p class="noindent" >GitHub Actions also provides a secure way to manage secrets. You can
store secrets in the GitHub repository settings and reference them in the
workﬂow ﬁle.
</p><!--l. 146--><p class="noindent" >Here’s an example GitHub Actions conﬁguration:
</p>
<!--l. 148-->
  <div class="lstlisting" id="listing-52"><span class="label"><a 
 id="x1-106001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Plan</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">and</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Apply</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">on</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">push</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">branches</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor9"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">jobs</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">runs</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">on</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ubuntu</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">latest</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">steps</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor10"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">uses</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">actions</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">checkout@v2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor11"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Set</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">up</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">uses</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">hashicorp</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">setup</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform@v1</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor12"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Init</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">run</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">init</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106017r17"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">17</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span id="textcolor13"><span 
class="pcrr8t-"> -</span><span 
class="pcrr8t-"> </span></span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Apply</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106018r18"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">18</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">run</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">auto</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">approve</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106019r19"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">19</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">env</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106020r20"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">20</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">AWS_ACCESS_KEY_ID</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">$</span></span><span style="color:#000000"><span 
class="pcrr8t-">{{</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">secrets</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS_ACCESS_KEY_ID</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">}}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-106021r21"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">21</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">AWS_SECRET_ACCESS_KEY</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">$</span></span><span style="color:#000000"><span 
class="pcrr8t-">{{</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">secrets</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS_SECRET_ACCESS_KEY</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">}}</span></span></div>
  
                                                                
                                                                
<!--l. 172--><p class="noindent" >In this conﬁguration, secrets such as AWS credentials are securely accessed
from GitHub’s secret store and used during the execution of Terraform
commands.
<a 
 id="x1-106022r110"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">8.5    </span> <a 
 id="x1-1070005"></a>Wrapping Up</h3>
<!--l. 176--><p class="noindent" >Security is a critical aspect of managing infrastructure with Terraform, and
managing secrets securely is an essential part of that. By using tools like
HashiCorp Vault, environment variables, and remote backends with
encryption, you can ensure that your sensitive data is protected.
Additionally, by integrating Terraform with CI/CD pipelines, you can
securely manage secrets in automated workﬂows, allowing you to maintain
control over your infrastructure while minimizing risk.
</p><!--l. 180--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore Terraform testing and validation. Let’s</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 9</span><br /><a 
 id="x1-1080009"></a>Testing and Validation</h2>
<a 
 id="x1-108001r113"></a>
<h3 class="sectionHead"><span class="titlemark">9.1    </span> <a 
 id="x1-1090001"></a>The Importance of Testing in Infrastructure as Code</h3>
<!--l. 6--><p class="noindent" >In the same way that software code requires testing to ensure it functions as
expected, infrastructure as code (IaC) needs testing to guarantee
that the conﬁguration and automation provided by Terraform are
correct. Without tests, there’s always the risk that the infrastructure
may be misconﬁgured, leading to potential downtime or security
vulnerabilities.
</p><!--l. 8--><p class="noindent" >In this chapter, we will explore various ways to test Terraform conﬁgurations,
validate your infrastructure, and ensure that changes are safe before
applying them. By incorporating testing and validation into your workﬂow,
you can signiﬁcantly reduce the risk of errors and improve the reliability of
your infrastructure.
<a 
 id="x1-109001r115"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">9.2    </span> <a 
 id="x1-1100002"></a>Unit Testing Terraform Code</h3>
<!--l. 12--><p class="noindent" >Unit testing in Terraform can be challenging due to its declarative nature
and the fact that it manages external resources. However, it is still possible
to write tests for certain aspects of Terraform conﬁgurations. The
goal of unit testing in Terraform is to ensure that the code behaves
as expected under diﬀerent conditions, without applying it to real
infrastructure.
<a 
 id="x1-110001r112"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">9.2.1    </span> <a 
 id="x1-1110001"></a>Using Terraform’s Built-in Validation</h4>
<!--l. 16--><p class="noindent" >Terraform has a built-in command called <span 
class="pcrr8t-x-x-120">terraform validate</span>,
which checks the syntax and internal consistency of Terraform ﬁles.
It does not require applying the conﬁguration and can be used to
quickly catch errors like misconﬁgured resource blocks or undeﬁned
variables.
</p><!--l. 18--><p class="noindent" >Here’s how to run the validation command:
</p>
<!--l. 20-->
  <div class="lstlisting" id="listing-53"><span class="label"><a 
 id="x1-111001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">validate</span></span></div>
  
<!--l. 24--><p class="noindent" >This command checks the conﬁguration for syntax errors and missing
variables. However, it does not validate whether the conﬁguration can
actually be applied successfully (i.e., it doesn’t check for provider
connectivity or the actual state of resources).
<a 
 id="x1-111002r117"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">9.2.2    </span> <a 
 id="x1-1120002"></a>Using <span 
class="pcrr8t-x-x-120">tflint </span>for Static Code Analysis</h4>
<!--l. 28--><p class="noindent" >For more advanced static analysis, <span 
class="pcrr8t-x-x-120">tflint </span>is a tool that can help detect
common mistakes in Terraform conﬁgurations. It checks for issues like
missing provider conﬁgurations, unquoted variables, deprecated syntax,
and more.
</p><!--l. 30--><p class="noindent" >To use <span 
class="pcrr8t-x-x-120">tflint</span>, ﬁrst install it using the following command:
</p>
<!--l. 32-->
                                                                
                                                                
  <div class="lstlisting" id="listing-54"><span class="label"><a 
 id="x1-112001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">brew</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">install</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">tflint</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">For</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">macOS</span></span></div>
  
<!--l. 36--><p class="noindent" >Next, run <span 
class="pcrr8t-x-x-120">tflint </span>on your Terraform ﬁles:
</p>
<!--l. 38-->
  <div class="lstlisting" id="listing-55"><span class="label"><a 
 id="x1-112002r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">tflint</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span></div>
  
<!--l. 42--><p class="noindent" ><span 
class="pcrr8t-x-x-120">tflint </span>will analyze your Terraform conﬁgurations and provide warnings
and suggestions for improvement.
<a 
 id="x1-112003r116"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">9.3    </span> <a 
 id="x1-1130003"></a>Integration Testing with <span 
class="pcrr8t-x-x-120">terraform plan</span></h3>
<!--l. 46--><p class="noindent" >While unit tests check the syntax and structure of your conﬁgurations,
integration testing involves running Terraform commands like <span 
class="pcrr8t-x-x-120">terraform</span>
<span 
class="pcrr8t-x-x-120">plan </span>to validate that the changes will be applied correctly to real
infrastructure.
<a 
 id="x1-113001r118"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">9.3.1    </span> <a 
 id="x1-1140001"></a>Running <span 
class="pcrr8t-x-x-120">terraform plan</span></h4>
<!--l. 50--><p class="noindent" >The <span 
class="pcrr8t-x-x-120">terraform plan </span>command creates an execution plan that shows
what changes Terraform will apply to the infrastructure. This allows you to
preview the changes before actually applying them. Running <span 
class="pcrr8t-x-x-120">terraform</span>
<span 
class="pcrr8t-x-x-120">plan </span>is a critical step in testing changes to your infrastructure, as it
helps identify potential issues that might arise when applying the
conﬁguration.
                                                                
                                                                
</p><!--l. 52--><p class="noindent" >For example:
</p>
<!--l. 54-->
  <div class="lstlisting" id="listing-56"><span class="label"><a 
 id="x1-114001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">plan</span></span></div>
  
<!--l. 58--><p class="noindent" >The output will show a preview of the actions Terraform will take, such as
adding, modifying, or deleting resources. By reviewing the plan before
applying it, you can ensure that the changes are correct and aligned with
your intentions.
<a 
 id="x1-114002r120"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">9.3.2    </span> <a 
 id="x1-1150002"></a>Environment-Speciﬁc Testing</h4>
<!--l. 62--><p class="noindent" >In multi-environment conﬁgurations (e.g., development, staging,
production), it is important to test the infrastructure in each environment.
Terraform supports multiple workspaces, which allow you to manage
diﬀerent environments with separate state ﬁles.
</p><!--l. 64--><p class="noindent" >To switch to a diﬀerent workspace:
</p>
<!--l. 66-->
  <div class="lstlisting" id="listing-57"><span class="label"><a 
 id="x1-115001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">workspace</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">select</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">staging</span></span></div>
  
<!--l. 70--><p class="noindent" >Running <span 
class="pcrr8t-x-x-120">terraform plan </span>in each workspace ensures that the
conﬁguration is valid and will apply correctly to the respective
environment.
<a 
 id="x1-115002r119"></a>
                                                                
                                                                
</p>
<h3 class="sectionHead"><span class="titlemark">9.4    </span> <a 
 id="x1-1160004"></a>Using <span 
class="pcrr8t-x-x-120">terraform apply </span>Safely</h3>
<a 
 id="x1-116001r121"></a>
<h4 class="subsectionHead"><span class="titlemark">9.4.1    </span> <a 
 id="x1-1170001"></a>Using <span 
class="pcrr8t-x-x-120">-auto-approve </span>with <span 
class="pcrr8t-x-x-120">terraform apply</span></h4>
<!--l. 75--><p class="noindent" >While <span 
class="pcrr8t-x-x-120">terraform plan </span>previews the changes, <span 
class="pcrr8t-x-x-120">terraform apply</span>
actually applies the changes to your infrastructure. To avoid accidentally
applying changes, always run <span 
class="pcrr8t-x-x-120">terraform plan </span>ﬁrst. In automated
workﬂows, you can use the <span 
class="pcrr8t-x-x-120">-auto-approve </span>ﬂag to bypass the
conﬁrmation step during <span 
class="pcrr8t-x-x-120">terraform apply</span>.
</p><!--l. 77--><p class="noindent" >Here’s how to use <span 
class="pcrr8t-x-x-120">terraform apply </span>with <span 
class="pcrr8t-x-x-120">-auto-approve</span>:
</p>
<!--l. 79-->
  <div class="lstlisting" id="listing-58"><span class="label"><a 
 id="x1-117001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">auto</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">approve</span></span></div>
  
<!--l. 83--><p class="noindent" >However, it’s important to use this ﬂag with caution, especially in
production environments, as it skips the manual approval step that ensures
changes are reviewed before being applied.
<a 
 id="x1-117002r122"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">9.5    </span> <a 
 id="x1-1180005"></a>Acceptance Testing with <span 
class="pcrr8t-x-x-120">terratest</span></h3>
<!--l. 87--><p class="noindent" >For more advanced testing, you can use <span 
class="pcrr8t-x-x-120">terratest</span>, a Go-based testing
framework for Terraform. <span 
class="pcrr8t-x-x-120">terratest </span>allows you to write automated
tests that deploy real infrastructure and then validate that it is set up
correctly.
                                                                
                                                                
</p><!--l. 89--><p class="noindent" >To use <span 
class="pcrr8t-x-x-120">terratest</span>, write Go tests that launch your Terraform
conﬁgurations and verify that the resources are properly created. For
example:
</p>
<!--l. 91-->
  <div class="lstlisting" id="listing-59"><span class="label"><a 
 id="x1-118001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">package</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">test</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">import</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">testing</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">github</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">com</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">gruntwork</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">io</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terratest</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">github</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">com</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">gruntwork</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">io</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terratest</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">validator</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrr8t-">func</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">TestTerraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">t</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">*</span></span><span style="color:#000000"><span 
class="pcrr8t-">testing</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">T</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">terraformOptions</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">:=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">&amp;</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">Options</span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">TerraformDir</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">../</span></span><span style="color:#000000"><span 
class="pcrr8t-">examples</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform_example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">Vars</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">map</span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">string</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span style="color:#000000"><span 
class="pcrr8t-">interface</span></span><span style="color:#000000"><span 
class="pcrr8t-">{}{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">},</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">VarFiles</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[]</span></span><span style="color:#000000"><span 
class="pcrr8t-">string</span></span><span style="color:#000000"><span 
class="pcrr8t-">{},</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118017r17"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">17</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118018r18"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">18</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">//</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Initialize</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">and</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">configuration</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118019r19"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">19</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">InitAndApply</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">t</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraformOptions</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118020r20"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">20</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118021r21"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">21</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">//</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Validate</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118022r22"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">22</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">:=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">Output</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">t</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">terraformOptions</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_id</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118023r23"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">23</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">validator</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">AssertNotEmpty</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">t</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-118024r24"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">24</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 118--><p class="noindent" >In this example, the test initializes the Terraform conﬁguration, applies it,
and then checks that the output (e.g., instance ID) is not empty.
<span 
class="pcrr8t-x-x-120">terratest </span>is a powerful way to automate end-to-end testing for your
infrastructure.
<a 
 id="x1-118025r124"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">9.6    </span> <a 
 id="x1-1190006"></a>Validating Infrastructure with <span 
class="pcrr8t-x-x-120">infracost</span></h3>
<!--l. 122--><p class="noindent" >While Terraform focuses on managing the infrastructure lifecycle,
<span 
class="pcrr8t-x-x-120">infracost </span>is a tool that helps you visualize the cost implications of your
infrastructure changes. By integrating <span 
class="pcrr8t-x-x-120">infracost </span>into your workﬂow,
you can estimate the cost of your infrastructure before applying
changes.
</p><!--l. 124--><p class="noindent" >To use <span 
class="pcrr8t-x-x-120">infracost</span>, install it and run:
</p>
<!--l. 126-->
  <div class="lstlisting" id="listing-60"><span class="label"><a 
 id="x1-119001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">infracost</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">breakdown</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">--</span></span><span style="color:#000000"><span 
class="pcrr8t-">path</span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span></div>
  
<!--l. 130--><p class="noindent" >This will output a cost estimate for the resources deﬁned in your Terraform
conﬁguration, helping you make cost-conscious decisions before applying
                                                                
                                                                
changes.
<a 
 id="x1-119002r125"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">9.7    </span> <a 
 id="x1-1200007"></a>Wrapping Up</h3>
<!--l. 134--><p class="noindent" >Testing and validation are critical aspects of managing infrastructure
with Terraform. By using <span 
class="pcrr8t-x-x-120">terraform validate</span>, <span 
class="pcrr8t-x-x-120">tflint</span>,
<span 
class="pcrr8t-x-x-120">terraform plan</span>, and other testing tools like <span 
class="pcrr8t-x-x-120">terratest </span>and
<span 
class="pcrr8t-x-x-120">infracost</span>, you can ensure that your conﬁgurations are safe, accurate,
and cost-eﬀective. Incorporating testing into your Terraform workﬂow
helps catch errors early, reduce risks, and maintain the reliability of your
infrastructure.
</p><!--l. 138--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore scaling infrastructure with Terraform.</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 10</span><br /><a 
 id="x1-12100010"></a>Scaling Infrastructure with Terraform</h2>
<a 
 id="x1-121001r126"></a>
<h3 class="sectionHead"><span class="titlemark">10.1    </span> <a 
 id="x1-1220001"></a>The Need for Scaling in Terraform</h3>
<!--l. 6--><p class="noindent" >As your infrastructure grows, it becomes increasingly important to manage
resources eﬃciently and scale them based on demand. Terraform is
not just a tool for creating static infrastructure, but also a powerful
solution for scaling infrastructure dynamically in response to changing
requirements.
</p><!--l. 8--><p class="noindent" >Scaling infrastructure with Terraform means adjusting your resources to
meet both the immediate and long-term needs of your applications, whether
you’re expanding your compute capacity, adjusting storage, or managing the
load across multiple regions.
</p><!--l. 10--><p class="noindent" >In this chapter, we will explore how to use Terraform to scale infrastructure,
including managing resource count, autoscaling groups, and multi-region
deployments. We will also look at how to maintain modular, reusable
conﬁgurations that can adapt to changing demands.
<a 
 id="x1-122001r128"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">10.2    </span> <a 
 id="x1-1230002"></a>Scaling Resources with Count and For-Each</h3>
<!--l. 14--><p class="noindent" >One of the simplest ways to scale resources in Terraform is by using the
<span 
class="pcrr8t-x-x-120">count </span>and <span 
class="pcrr8t-x-x-120">for_each </span>meta-arguments. These allow you to create
multiple instances of a resource based on dynamic input.
<a 
 id="x1-123001r123"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">10.2.1    </span> <a 
 id="x1-1240001"></a>Using <span 
class="pcrr8t-x-x-120">count </span>to Scale Resources</h4>
<!--l. 18--><p class="noindent" >The <span 
class="pcrr8t-x-x-120">count </span>argument allows you to create multiple instances of the same
resource. For example, if you want to create multiple EC2 instances based
on a variable, you can use <span 
class="pcrr8t-x-x-120">count</span>:
</p>
<!--l. 20-->
  <div class="lstlisting" id="listing-61"><span class="label"><a 
 id="x1-124001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web_server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-124002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">count</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_count</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-124003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-124004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-124005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 28--><p class="noindent" >In this example, the number of EC2 instances is controlled by the
<span 
class="pcrr8t-x-x-120">instance_count </span>variable. You can scale the infrastructure up or down
simply by changing the value of this variable.
<a 
 id="x1-124006r130"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">10.2.2    </span> <a 
 id="x1-1250002"></a>Using <span 
class="pcrr8t-x-x-120">for_each </span>for Fine-Grained Control</h4>
<!--l. 32--><p class="noindent" >The <span 
class="pcrr8t-x-x-120">for_each </span>argument is more ﬂexible than <span 
class="pcrr8t-x-x-120">count </span>because it allows
you to iterate over complex data types like maps or sets. This is useful when
you need to scale based on speciﬁc values, such as creating a set of
resources with diﬀerent conﬁgurations.
</p><!--l. 34--><p class="noindent" >For example, to create multiple instances with diﬀerent instance types, you
could use:
</p>
<!--l. 36-->
  <div class="lstlisting" id="listing-62"><span class="label"><a 
 id="x1-125001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-125002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">for_each</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instances</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-125003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-125004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">each</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-125005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 44--><p class="noindent" >Here, <span 
class="pcrr8t-x-x-120">var.instances </span>is a map of instance types, and <span 
class="pcrr8t-x-x-120">for_each</span>
                                                                
                                                                
iterates over the map, creating an instance for each value in the map.
<a 
 id="x1-125006r129"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">10.3    </span> <a 
 id="x1-1260003"></a>Using Auto Scaling Groups</h3>
<!--l. 48--><p class="noindent" >When managing large-scale infrastructure, manually provisioning and scaling
individual instances becomes impractical. Auto Scaling Groups (ASG)
<span class="footnote-mark"><a 
href="main2.html#fn1x10">“</a></span><a 
 id="x1-126001f1"></a>
provide a way to automatically scale your infrastructure based on
predeﬁned policies. This ensures that the number of instances always
matches the demand.
<a 
 id="x1-126002r131"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">10.3.1    </span> <a 
 id="x1-1270001"></a>Creating an Auto Scaling Group</h4>
<!--l. 56--><p class="noindent" >To create an Auto Scaling Group in AWS using Terraform, you need to
deﬁne the <span 
class="pcrr8t-x-x-120">aws_autoscaling_group </span>resource along with a launch
conﬁguration. Here’s an example:
</p>
<!--l. 58-->
  <div class="lstlisting" id="listing-63"><span class="label"><a 
 id="x1-127001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_launch_configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">launch</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">image_id</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_autoscaling_group</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">desired_capacity</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">max_size</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">5</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">min_size</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">1</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">vpc_zone_identifier</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">subnet</span></span><span style="color:#000000"><span 
class="pcrr8t-">-12345678</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">launch_configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_launch_configuration</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-127013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 74--><p class="noindent" >In this example, the Auto Scaling Group starts with 2 instances (deﬁned by
                                                                
                                                                
<span 
class="pcrr8t-x-x-120">desired_capacity</span>) and can scale between 1 and 5 instances based on
demand. The group uses the launch conﬁguration to deﬁne how instances
should be created.
<a 
 id="x1-127014r133"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">10.3.2    </span> <a 
 id="x1-1280002"></a>Scaling Based on Metrics</h4>
<!--l. 78--><p class="noindent" >You can also conﬁgure Auto Scaling Groups to scale dynamically
based on metrics such as CPU utilization, network traﬃc, or custom
metrics. This is done by attaching scaling policies to the Auto Scaling
Group:
</p>
<!--l. 80-->
  <div class="lstlisting" id="listing-64"><span class="label"><a 
 id="x1-128001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_autoscaling_policy</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">scale_up</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">scale</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">up</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">policy</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">scaling_adjustment</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">1</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">adjustment_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ChangeInCapacity</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cooldown</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">300</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">autoscaling_group_name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_autoscaling_group</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_autoscaling_policy</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">scale_down</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">scale</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">down</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">policy</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">scaling_adjustment</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">adjustment_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ChangeInCapacity</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cooldown</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">300</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">autoscaling_group_name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_autoscaling_group</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-128015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 98--><p class="noindent" >In this example, the scaling policies will add or remove instances based
on the speciﬁed scaling adjustments. You can conﬁgure triggers
such as high CPU usage to automatically scale up or scale down the
group.
<a 
 id="x1-128016r132"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">10.4    </span> <a 
 id="x1-1290004"></a>Multi-Region Infrastructure</h3>
<!--l. 102--><p class="noindent" >Scaling isn’t limited to adding more resources within a single region. In
fact, many applications require multi-region deployments to ensure
availability and improve performance. Terraform makes it easy to manage
multi-region infrastructure by simply deﬁning resources in multiple
                                                                
                                                                
provider blocks.
<a 
 id="x1-129001r134"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">10.4.1    </span> <a 
 id="x1-1300001"></a>Deploying Resources Across Regions</h4>
<!--l. 106--><p class="noindent" >You can deﬁne resources in diﬀerent regions by conﬁguring multiple
provider blocks. For example:
</p>
<!--l. 108-->
  <div class="lstlisting" id="listing-65"><span class="label"><a 
 id="x1-130001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">east</span></span><span style="color:#000000"><span 
class="pcrr8t-">-1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us_east</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span style="color:#000000"><span 
class="pcrb8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">alias</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">west</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">region</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">west</span></span><span style="color:#000000"><span 
class="pcrr8t-">-2</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">us_west</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrb8t-">provider</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">west</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130017r17"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">17</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130018r18"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">18</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-130019r19"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">19</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 130--><p class="noindent" >In this example, we deﬁne two AWS providers: one for the <span 
class="pcrr8t-x-x-120">us-east-1</span>
region and one for the <span 
class="pcrr8t-x-x-120">us-west-2 </span>region. We then create instances in
both regions by specifying which provider to use for each resource.
<a 
 id="x1-130020r135"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">10.5    </span> <a 
 id="x1-1310005"></a>Wrapping Up</h3>
<!--l. 134--><p class="noindent" >Scaling infrastructure with Terraform enables you to eﬃciently manage
resources as demand grows or shrinks. Whether you’re using <span 
class="pcrr8t-x-x-120">count </span>and
<span 
class="pcrr8t-x-x-120">for_each </span>for resource scaling, implementing Auto Scaling Groups
for dynamic adjustments, or managing multi-region deployments,
Terraform provides the tools necessary to create scalable, resilient
infrastructure.
</p><!--l. 136--><p class="noindent" >By following best practices and leveraging Terraform’s powerful features,
you can ensure that your infrastructure remains ﬂexible, reliable, and
cost-eﬀective as your application grows.
                                                                
                                                                
</p><!--l. 140--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore debugging and troubleshooting Terraform.</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 11</span><br /><a 
 id="x1-13200011"></a>Debugging and Troubleshooting</h2>
<a 
 id="x1-132001r137"></a>
<h3 class="sectionHead"><span class="titlemark">11.1    </span> <a 
 id="x1-1330001"></a>The Importance of Debugging in Terraform</h3>
<!--l. 6--><p class="noindent" >Despite Terraform’s simplicity and declarative nature, errors and issues can
still arise during infrastructure management. As your infrastructure grows
in complexity, so do the potential points of failure. Debugging and
troubleshooting are essential skills to master, enabling you to identify
and resolve problems in your Terraform conﬁgurations quickly and
eﬃciently.
</p><!--l. 8--><p class="noindent" >In this chapter, we will explore the various methods and tools available in
Terraform to help diagnose issues, understand error messages, and
troubleshoot infrastructure problems. Whether you’re dealing with
conﬁguration errors, state issues, or provider-speciﬁc problems, this
chapter will guide you through the steps to resolve common problems
eﬀectively.
<a 
 id="x1-133001r139"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">11.2    </span> <a 
 id="x1-1340002"></a>Common Terraform Errors and How to Fix Them</h3>
<!--l. 12--><p class="noindent" >Terraform provides detailed error messages that can often help you pinpoint
issues with your conﬁguration. Understanding common errors is the ﬁrst
step toward debugging.
<a 
 id="x1-134001r136"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">11.2.1    </span> <a 
 id="x1-1350001"></a>Invalid Conﬁguration Errors</h4>
<!--l. 16--><p class="noindent" >One of the most common errors occurs when the conﬁguration is
syntactically incorrect or misconﬁgured. For example, if a required
argument is missing or if the syntax is invalid, Terraform will output an
error similar to:
</p>
<!--l. 18-->
  <div class="lstlisting" id="listing-66"><span class="label"><a 
 id="x1-135001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Missing</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">required</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">argument</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">on</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">line</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">5,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">in</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">5:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="pcrr8t-">The</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">argument</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">is</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">required</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">but</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">no</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">definition</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">was</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">found</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span></div>
  
<!--l. 27--><p class="noindent" >In this example, Terraform is complaining that the <span 
class="pcrr8t-x-x-120">instance_type</span>
argument is missing in the <span 
class="pcrr8t-x-x-120">aws_instance </span>resource. To ﬁx this, you
simply need to add the missing argument:
</p>
<!--l. 29-->
  <div class="lstlisting" id="listing-67"><span class="label"><a 
 id="x1-135007r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135008r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135009r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-135010r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<a 
 id="x1-135011r141"></a>
<h4 class="subsectionHead"><span class="titlemark">11.2.2    </span> <a 
 id="x1-1360002"></a>Resource Not Found Errors</h4>
<!--l. 38--><p class="noindent" >Sometimes Terraform fails to ﬁnd a resource due to an incorrect reference
or a missing resource. For example, if you try to reference a resource
that doesn’t exist in the state ﬁle, Terraform will output an error
like:
</p>
<!--l. 40-->
  <div class="lstlisting" id="listing-68"><span class="label"><a 
 id="x1-136001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">’</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">’</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">not</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">found</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-136002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-136003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">on</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">main</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">tf</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">line</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">10,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">in</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_public_ip</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-136004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">10:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">public_ip</span></span></div>
                                                                
                                                                
  
<!--l. 47--><p class="noindent" >In this case, the error indicates that Terraform is unable to ﬁnd the
<span 
class="pcrr8t-x-x-120">aws_instance.example </span>resource in the current state. You can ﬁx this
error by ensuring that the resource exists and is correctly deﬁned in the
conﬁguration, or by running <span 
class="pcrr8t-x-x-120">terraform apply </span>to apply changes and
update the state.
<a 
 id="x1-136005r142"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">11.2.3    </span> <a 
 id="x1-1370003"></a>Provider Conﬁguration Errors</h4>
<!--l. 51--><p class="noindent" >Another common issue is misconﬁguration of the provider. If Terraform
cannot authenticate with the provider or cannot ﬁnd the necessary
credentials, you might see an error like:
</p>
<!--l. 53-->
  <div class="lstlisting" id="listing-69"><span class="label"><a 
 id="x1-137001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Error</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">configuring</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">AWS</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Provider</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">AccessDenied</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-137002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-137003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">You</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">must</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">be</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">authenticated</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">perform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">this</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">operation</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span></div>
  
<!--l. 59--><p class="noindent" >This error occurs when the AWS credentials provided to Terraform are
either incorrect or insuﬃcient. Ensure that your environment variables are
correctly set, or that you’ve speciﬁed the correct credentials in the provider
conﬁguration.
<a 
 id="x1-137004r140"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">11.3    </span> <a 
 id="x1-1380003"></a>Using <span 
class="pcrr8t-x-x-120">terraform console </span>for Debugging</h3>
<!--l. 63--><p class="noindent" >Terraform provides an interactive console that allows you to query the state
                                                                
                                                                
and evaluate expressions. The <span 
class="pcrr8t-x-x-120">terraform console </span>command is
particularly useful for debugging, as it lets you inspect the values of
variables, outputs, and resource attributes.
<a 
 id="x1-138001r143"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">11.3.1    </span> <a 
 id="x1-1390001"></a>Inspecting Variables and Outputs</h4>
<!--l. 67--><p class="noindent" >In the console, you can evaluate expressions and retrieve the values of
variables or outputs deﬁned in your conﬁguration. For example, if you want
to check the value of a variable, you can run:
</p>
<!--l. 69-->
  <div class="lstlisting" id="listing-70"><span class="label"><a 
 id="x1-139001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">console</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-139002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-139003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<!--l. 75--><p class="noindent" >You can also check the values of resource attributes. For example, to view
the public IP address of an EC2 instance:
</p>
<!--l. 77-->
  <div class="lstlisting" id="listing-71"><span class="label"><a 
 id="x1-139004r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">console</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-139005r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">public_ip</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-139006r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">54.174.35.232</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<a 
 id="x1-139007r145"></a>
<h4 class="subsectionHead"><span class="titlemark">11.3.2    </span> <a 
 id="x1-1400002"></a>Evaluating Expressions</h4>
<!--l. 85--><p class="noindent" >The console also allows you to evaluate expressions. For instance, you can
test the result of a conditional expression or calculate values:
</p>
<!--l. 87-->
                                                                
                                                                
  <div class="lstlisting" id="listing-72"><span class="label"><a 
 id="x1-140001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">console</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-140002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">==</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">?</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Small</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Large</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-140003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Small</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<!--l. 93--><p class="noindent" >This feature is useful for troubleshooting and quickly verifying that your
logic is correct.
<a 
 id="x1-140004r144"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">11.4    </span> <a 
 id="x1-1410004"></a>Using <span 
class="pcrr8t-x-x-120">terraform plan </span>to Debug Changes</h3>
<!--l. 97--><p class="noindent" >The <span 
class="pcrr8t-x-x-120">terraform plan </span>command is a powerful debugging tool because it
shows you exactly what Terraform intends to do. By running <span 
class="pcrr8t-x-x-120">terraform</span>
<span 
class="pcrr8t-x-x-120">plan</span>, you can preview the changes that Terraform will make and verify
that they match your expectations.
<a 
 id="x1-141001r146"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">11.4.1    </span> <a 
 id="x1-1420001"></a>Reviewing the Plan Output</h4>
<!--l. 101--><p class="noindent" >When running <span 
class="pcrr8t-x-x-120">terraform plan</span>, pay attention to the output, especially
the proposed actions (e.g., <span 
class="pcrr8t-x-x-120">+ </span>for creation, <span 
class="pcrr8t-x-x-120">- </span>for destruction). If Terraform is
making unexpected changes, the plan output will often provide insights into
what went wrong.
</p><!--l. 103--><p class="noindent" >For example:
</p>
<!--l. 105-->
  <div class="lstlisting" id="listing-73"><span class="label"><a 
 id="x1-142001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">Terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">will</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">perform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">following</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">actions</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">+</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">computed</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">security_groups</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"1"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">security_groups</span></span><span style="color:#000000"><span 
class="pcrr8t-">.0:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">default</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">subnet_id</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">subnet</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">bb1c79de3EXAMPLE</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">private_ip</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">computed</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">public_ip</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">&lt;</span></span><span style="color:#000000"><span 
class="pcrr8t-">computed</span></span><span style="color:#000000"><span 
class="pcrr8t-">&gt;</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-">.%:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-142013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">tags</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">Name</span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">Web</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span></div>
  
<!--l. 121--><p class="noindent" >Reviewing this output helps identify potential misconﬁgurations and allows
you to correct any issues before applying the changes.
                                                                
                                                                
<a 
 id="x1-142014r147"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">11.5    </span> <a 
 id="x1-1430005"></a>State Management and Troubleshooting</h3>
<!--l. 125--><p class="noindent" >Terraform’s state ﬁle is an important tool for troubleshooting. If Terraform
is not behaving as expected, or if resources are not being created, updated,
or deleted correctly, the state ﬁle might be out of sync with your actual
infrastructure.
<a 
 id="x1-143001r148"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">11.5.1    </span> <a 
 id="x1-1440001"></a>Inspecting the State</h4>
<!--l. 129--><p class="noindent" >You can inspect the state ﬁle using the <span 
class="pcrr8t-x-x-120">terraform state </span>command.
This command allows you to list, inspect, and remove resources from the
state ﬁle.
</p><!--l. 131--><p class="noindent" >For example, to view all the resources in the current state, run:
</p>
<!--l. 133-->
  <div class="lstlisting" id="listing-74"><span class="label"><a 
 id="x1-144001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span></div>
  
<!--l. 137--><p class="noindent" >To inspect a speciﬁc resource in the state, use:
</p>
<!--l. 139-->
  <div class="lstlisting" id="listing-75"><span class="label"><a 
 id="x1-144002r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">state</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">show</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span></div>
  
<a 
 id="x1-144003r150"></a>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">11.5.2    </span> <a 
 id="x1-1450002"></a>Refreshing the State</h4>
<!--l. 145--><p class="noindent" >If you suspect that your state ﬁle is out of sync, you can use the
<span 
class="pcrr8t-x-x-120">terraform refresh </span>command to update the state ﬁle based on the
current state of the infrastructure:
</p>
<!--l. 147-->
  <div class="lstlisting" id="listing-76"><span class="label"><a 
 id="x1-145001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">refresh</span></span></div>
  
<!--l. 151--><p class="noindent" >This command syncs the local state ﬁle with the actual infrastructure,
ensuring that Terraform has the most up-to-date information.
<a 
 id="x1-145002r149"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">11.6    </span> <a 
 id="x1-1460006"></a>Advanced Debugging with <span 
class="pcrr8t-x-x-120">TF_LOG</span></h3>
<!--l. 155--><p class="noindent" >Terraform oﬀers a powerful logging feature that can provide detailed
information about what Terraform is doing behind the scenes. You can
enable detailed logging by setting the <span 
class="pcrr8t-x-x-120">TF_LOG </span>environment variable to one
of the following levels:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 158--><p class="noindent" ><span 
class="pcrr8t-x-x-120">TRACE </span>-   Most   verbose   logging,   useful   for   debugging
      Terraform’s internal operations.
      </p></li>
      <li class="itemize">
      <!--l. 159--><p class="noindent" ><span 
class="pcrr8t-x-x-120">DEBUG </span>- Detailed debug information, including API calls and
                                                                
                                                                
      responses.
      </p></li>
      <li class="itemize">
      <!--l. 160--><p class="noindent" ><span 
class="pcrr8t-x-x-120">INFO </span>- Default level, providing information about Terraform’s
      operations.
      </p></li>
      <li class="itemize">
      <!--l. 161--><p class="noindent" ><span 
class="pcrr8t-x-x-120">WARN </span>- Logs only warnings and errors.
      </p></li>
      <li class="itemize">
      <!--l. 162--><p class="noindent" ><span 
class="pcrr8t-x-x-120">ERROR </span>- Logs only errors.</p></li></ul>
<!--l. 165--><p class="noindent" >To enable logging, set the <span 
class="pcrr8t-x-x-120">TF_LOG </span>environment variable:
</p>
<!--l. 167-->
  <div class="lstlisting" id="listing-77"><span class="label"><a 
 id="x1-146001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">export</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">TF_LOG</span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-">DEBUG</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-146002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">apply</span></span></div>
  
<!--l. 172--><p class="noindent" >This will print detailed logs to the console, which can help you track down
issues in your conﬁguration or Terraform’s operations.
<a 
 id="x1-146003r152"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">11.7    </span> <a 
 id="x1-1470007"></a>Wrapping Up</h3>
<!--l. 176--><p class="noindent" >Debugging and troubleshooting are crucial skills for working with
Terraform, especially as your infrastructure grows more complex. By
understanding common errors, using the <span 
class="pcrr8t-x-x-120">terraform console </span>and
                                                                
                                                                
<span 
class="pcrr8t-x-x-120">terraform plan </span>commands, and leveraging Terraform’s state
management and logging tools, you can quickly identify and resolve issues
in your infrastructure.
</p><!--l. 180--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore advanced Terraform functions and</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">features. Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 12</span><br /><a 
 id="x1-14800012"></a>Advanced Terraform Functions and Features</h2>
<a 
 id="x1-148001r153"></a>
<h3 class="sectionHead"><span class="titlemark">12.1    </span> <a 
 id="x1-1490001"></a>Introduction to Advanced Features</h3>
<!--l. 6--><p class="noindent" >While Terraform’s core functionality is simple and intuitive, it also
provides powerful advanced features and functions that enable you to
manage more complex and dynamic infrastructures. These features
allow for better ﬂexibility, reusability, and control in your Terraform
conﬁgurations.
</p><!--l. 8--><p class="noindent" >In this chapter, we will explore some of the advanced functions and features
that Terraform oﬀers, including string manipulation, conditional
expressions, dynamic blocks, working with data sources, and handling
dependencies. Understanding these features will allow you to write more
ﬂexible and scalable Terraform code.
<a 
 id="x1-149001r155"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">12.2    </span> <a 
 id="x1-1500002"></a>String Functions in Terraform</h3>
<!--l. 12--><p class="noindent" >Terraform provides a variety of functions for manipulating strings.
These functions allow you to dynamically generate names, manage
resources more eﬀectively, and customize conﬁgurations based on
variables.
<a 
 id="x1-150001r151"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.2.1    </span> <a 
 id="x1-1510001"></a>Common String Functions</h4>
<!--l. 16--><p class="noindent" >Here are some of the most commonly used string functions in Terraform:
                                                                
                                                                
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 19--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">concat</span>: Joins together two or more strings.
      </p></li>
      <li class="itemize">
      <!--l. 20--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">join</span>: Joins a list of strings into a single string using a speciﬁed
      delimiter.
      </p></li>
      <li class="itemize">
      <!--l. 21--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">replace</span>: Replaces occurrences of a substring within a string.
      </p></li>
      <li class="itemize">
      <!--l. 22--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">length</span>: Returns the length of a string.
      </p></li>
      <li class="itemize">
      <!--l. 23--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">substr</span>: Extracts a substring from a string based on the given
      start position and length.
      </p></li>
      <li class="itemize">
      <!--l. 24--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">lower</span>: Converts a string to lowercase.
      </p></li>
      <li class="itemize">
      <!--l. 25--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">upper</span>: Converts a string to uppercase.</p></li></ul>
<a 
 id="x1-151001r157"></a>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">12.2.2    </span> <a 
 id="x1-1520002"></a>Examples of String Functions</h4>
<!--l. 30--><p class="noindent" >Here’s how you can use these string functions in Terraform:
</p>
<!--l. 32-->
  <div class="lstlisting" id="listing-78"><span class="label"><a 
 id="x1-152001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">variable</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">string</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">default</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">web</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">server</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="pcrb8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_full_name</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">concat</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">-01</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Concatenates</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">instance</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">with</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">a</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">number</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span style="color:#000000"><span 
class="pcrb8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name_uppercase</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">upper</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Converts</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">to</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">uppercase</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span style="color:#000000"><span 
class="pcrb8t-">output</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name_substr</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">substr</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">instance_name</span></span><span style="color:#000000"><span 
class="pcrr8t-">,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">0,</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">3)</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">#</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">Extracts</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">the</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">first</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">3</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">characters</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-152016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 51--><p class="noindent" >In this example: - <span 
class="pcrr8t-x-x-120">concat </span>combines the instance name with a suﬃx. -
<span 
class="pcrr8t-x-x-120">upper </span>converts the instance name to uppercase. - <span 
class="pcrr8t-x-x-120">substr </span>extracts a
portion of the string.
<a 
 id="x1-152017r156"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">12.3    </span> <a 
 id="x1-1530003"></a>Conditional Expressions in Terraform</h3>
<!--l. 58--><p class="noindent" >Conditional expressions in Terraform allow you to apply diﬀerent logic
based on conditions, making your conﬁgurations more ﬂexible and
dynamic. The most common way to write conditional expressions is using
the ternary operator.
<a 
 id="x1-153001r158"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.3.1    </span> <a 
 id="x1-1540001"></a>Using the Ternary Operator</h4>
<!--l. 62--><p class="noindent" >The ternary operator allows you to return one of two values based on a
condition. The syntax is:
</p><!--l. 64--><p class="noindent" >
                                                                
                                                                
</p>
<div class="math-display" >
<img 
src="main2x.png" alt="condition?true-value : f alse-value
" class="math-display"  /></div>
<a 
 id="x1-154001r160"></a>
<h4 class="subsectionHead"><span class="titlemark">12.3.2    </span> <a 
 id="x1-1550002"></a>Example of Conditional Expressions</h4>
<!--l. 70--><p class="noindent" >Here’s an example of using a conditional expression to select an instance
type based on the environment:
</p>
<!--l. 72-->
  <div class="lstlisting" id="listing-79"><span class="label"><a 
 id="x1-155001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">variable</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">environment</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">string</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">default</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">production</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">environment</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">==</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">production</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">?</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">large</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">:</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-155009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 84--><p class="noindent" >In this example, if the environment is <span 
class="pcrr8t-x-x-120">production</span>, the instance type will
be <span 
class="pcrr8t-x-x-120">t2.large</span>, otherwise it will be <span 
class="pcrr8t-x-x-120">t2.micro</span>.
<a 
 id="x1-155010r159"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">12.4    </span> <a 
 id="x1-1560004"></a>Dynamic Blocks in Terraform</h3>
<!--l. 88--><p class="noindent" >Dynamic blocks provide a way to generate nested blocks within resources
based on variables or lists. This feature is particularly useful when you have
a resource that requires multiple similar blocks (e.g., security group
rules, network conﬁgurations) but the number of blocks changes
                                                                
                                                                
dynamically.
<a 
 id="x1-156001r161"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.4.1    </span> <a 
 id="x1-1570001"></a>Using Dynamic Blocks</h4>
<!--l. 92--><p class="noindent" >A dynamic block is deﬁned using the <span 
class="pcrr8t-x-x-120">dynamic </span>keyword, and it requires a
<span 
class="pcrr8t-x-x-120">for_each </span>or <span 
class="pcrr8t-x-x-120">content </span>argument to specify the list or structure that will
generate the blocks.
<a 
 id="x1-157001r163"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.4.2    </span> <a 
 id="x1-1580002"></a>Example of Dynamic Blocks</h4>
<!--l. 96--><p class="noindent" >Here’s an example of using a dynamic block to create multiple ingress rules
for a security group:
</p>
<!--l. 98-->
  <div class="lstlisting" id="listing-80"><span class="label"><a 
 id="x1-158001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">variable</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress_rules</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">object</span></span><span style="color:#000000"><span 
class="pcrr8t-">({</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">from_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">number</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">to_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">number</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">protocol</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">string</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cidr_blocks</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">list</span></span><span style="color:#000000"><span 
class="pcrr8t-">(</span></span><span style="color:#000000"><span 
class="pcrr8t-">string</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">})</span></span><span style="color:#000000"><span 
class="pcrr8t-">)</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">default</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">from_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">80</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">to_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">80</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">protocol</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">tcp</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158013r13"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">13</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cidr_blocks</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">0.0.0.0/0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158014r14"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">14</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">},</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158015r15"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">15</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158016r16"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">16</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">from_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">443</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158017r17"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">17</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">to_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">443</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158018r18"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">18</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">protocol</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">tcp</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158019r19"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">19</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cidr_blocks</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">0.0.0.0/0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158020r20"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">20</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158021r21"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">21</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158022r22"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">22</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158023r23"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">23</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158024r24"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">24</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_security_group</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158025r25"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">25</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">security</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">group</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158026r26"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">26</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158027r27"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">27</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">dynamic</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158028r28"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">28</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">for_each</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">var</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress_rules</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158029r29"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">29</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">content</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158030r30"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">30</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">from_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">from_port</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158031r31"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">31</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">to_port</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">to_port</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158032r32"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">32</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">protocol</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">protocol</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158033r33"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">33</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cidr_blocks</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">ingress</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">value</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">cidr_blocks</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158034r34"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">34</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158035r35"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">35</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-158036r36"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">36</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 137--><p class="noindent" >In this example, the <span 
class="pcrr8t-x-x-120">dynamic </span>block generates <span 
class="pcrr8t-x-x-120">ingress </span>rules based on
the <span 
class="pcrr8t-x-x-120">ingress_rules </span>variable, allowing you to scale the number of rules
dynamically.
<a 
 id="x1-158037r162"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">12.5    </span> <a 
 id="x1-1590005"></a>Working with Data Sources in Terraform</h3>
<!--l. 141--><p class="noindent" >Data sources allow Terraform to retrieve information about existing
resources, either created outside of Terraform or managed by another
                                                                
                                                                
Terraform conﬁguration. This is useful when you need to reference existing
resources in your infrastructure, like using an existing AMI to launch new
instances.
<a 
 id="x1-159001r164"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.5.1    </span> <a 
 id="x1-1600001"></a>Example of Using Data Sources</h4>
<!--l. 145--><p class="noindent" >Here’s an example of using a data source to ﬁnd the latest Amazon Machine
Image (AMI) and launch an EC2 instance based on that:
</p>
<!--l. 147-->
  <div class="lstlisting" id="listing-81"><span class="label"><a 
 id="x1-160001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrr8t-">data</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">latest_amazon_linux</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">most_recent</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">true</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">owners</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">amazon</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">filters</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">amzn2</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">hvm</span></span><span style="color:#000000"><span 
class="pcrr8t-">-*-</span></span><span style="color:#000000"><span 
class="pcrr8t-">x86_64</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">gp2</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160010r10"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">10</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">data</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">latest_amazon_linux</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">id</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160011r11"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">11</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-160012r12"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">12</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 162--><p class="noindent" >In this example, Terraform queries the AWS API to ﬁnd the latest Amazon
Linux AMI using the <span 
class="pcrr8t-x-x-120">aws_ami </span>data source and then uses it to create an
EC2 instance.
<a 
 id="x1-160013r165"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">12.6    </span> <a 
 id="x1-1610006"></a>Managing Dependencies in Terraform</h3>
<!--l. 166--><p class="noindent" >Terraform automatically handles most dependencies between resources.
However, in some cases, you may want to manually specify the order in
which resources are created or modiﬁed. This is where <span 
class="pcrr8t-x-x-120">depends_on</span>
comes into play.
<a 
 id="x1-161001r166"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">12.6.1    </span> <a 
 id="x1-1620001"></a>Using <span 
class="pcrr8t-x-x-120">depends_on</span></h4>
<!--l. 170--><p class="noindent" >The <span 
class="pcrr8t-x-x-120">depends_on </span>argument is used to explicitly specify resource
dependencies, ensuring that one resource is applied only after another
resource has been successfully created.
<a 
 id="x1-162001r168"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.6.2    </span> <a 
 id="x1-1630002"></a>Example of <span 
class="pcrr8t-x-x-120">depends_on</span></h4>
<!--l. 174--><p class="noindent" >Here’s an example of using <span 
class="pcrr8t-x-x-120">depends_on </span>to ensure that a security group is
created before launching an EC2 instance:
</p>
<!--l. 176-->
  <div class="lstlisting" id="listing-82"><span class="label"><a 
 id="x1-163001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_security_group</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">security</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">group</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrb8t-">resource</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_instance</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163006r6"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">6</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">ami</span></span><span style="color:#000000"><span 
class="pcrr8t-">-0</span></span><span style="color:#000000"><span 
class="pcrr8t-">c55b159cbfafe1f0</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163007r7"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">7</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">instance_type</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">t2</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">micro</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163008r8"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">8</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">depends_on</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">[</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws_security_group</span></span><span style="color:#000000"><span 
class="pcrr8t-">.</span></span><span style="color:#000000"><span 
class="pcrr8t-">example</span></span><span style="color:#000000"><span 
class="pcrr8t-">]</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-163009r9"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">9</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 188--><p class="noindent" >In this example, Terraform ensures that the security group is created before
the EC2 instance is launched, even though Terraform normally handles
dependencies automatically.
<a 
 id="x1-163010r167"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">12.7    </span> <a 
 id="x1-1640007"></a>Wrapping Up</h3>
<!--l. 192--><p class="noindent" >In this chapter, we’ve explored some of the advanced functions and features
that make Terraform such a powerful tool for infrastructure management.
By leveraging string manipulation, conditionals, dynamic blocks, data
sources, and resource dependencies, you can write more ﬂexible, eﬃcient,
and scalable Terraform conﬁgurations.
                                                                
                                                                
</p><!--l. 194--><p class="noindent" >Mastering these advanced features will allow you to take full advantage of
Terraform’s capabilities, enabling you to manage even the most complex
infrastructure setups with ease. As you continue to work with Terraform,
keep experimenting with these features to discover new ways to streamline
and automate your infrastructure management.
</p><!--l. 198--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore the Terraform path forwards. Let’s</span>
<span 
class="ntx-Italic-tlf-t1-x-x-120">go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 13</span><br /><a 
 id="x1-16500013"></a>The Path Forward</h2>
<a 
 id="x1-165001r170"></a>
<h3 class="sectionHead"><span class="titlemark">13.1    </span> <a 
 id="x1-1660001"></a>Terraform Cloud and Enterprise</h3>
<!--l. 6--><p class="noindent" >As you progress in your journey with Terraform, you may reach a
point where your team or infrastructure requires a more scalable and
collaborative solution. Terraform Cloud and Terraform Enterprise are
designed to meet these needs, providing a suite of features to enhance
collaboration, improve security, and streamline workﬂows.
<a 
 id="x1-166001r169"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">13.1.1    </span> <a 
 id="x1-1670001"></a>What is Terraform Cloud?</h4>
<!--l. 10--><p class="noindent" >Terraform Cloud is a SaaS (Software-as-a-Service) oﬀering from
HashiCorp that provides Terraform users with a centralized platform to
manage their infrastructure as code. It adds several key features, such as
remote state management, team collaboration, and policy enforcement, to
help teams work together more eﬀectively.
</p><!--l. 12--><p class="noindent" >Some of the beneﬁts of using Terraform Cloud include:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 15--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Remote state management</span>: Terraform Cloud stores state ﬁles
      remotely, ensuring that they are secure and accessible to your
      team.
      </p></li>
                                                                
                                                                
      <li class="itemize">
      <!--l. 16--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Collaboration</span>:   It   allows   multiple   users   to   collaborate   on
      infrastructure  changes,  review  pull  requests,  and  monitor  the
      progress of Terraform runs.
      </p></li>
      <li class="itemize">
      <!--l. 17--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Version control integration</span>: Terraform Cloud integrates with
      popular  version  control  systems  like  GitHub,  GitLab,  and
      Bitbucket,  making  it  easier  to  automate  and  collaborate  on
      infrastructure changes.
      </p></li>
      <li class="itemize">
      <!--l. 18--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Policy enforcement</span>: You can enforce policies with HashiCorp
      Sentinel, ensuring that all infrastructure changes adhere to your
      company’s security, compliance, and operational standards.</p></li></ul>
<a 
 id="x1-167001r173"></a>
<h4 class="subsectionHead"><span class="titlemark">13.1.2    </span> <a 
 id="x1-1680002"></a>What is Terraform Enterprise?</h4>
<!--l. 23--><p class="noindent" >Terraform Enterprise is the on-premises version of Terraform Cloud,
oﬀering similar features but with additional controls for organizations that
require more customization or prefer to host Terraform in their own data
centers. It provides enterprise-grade security, scalability, and compliance
features, making it suitable for large organizations with complex
infrastructure needs.
</p><!--l. 25--><p class="noindent" >Terraform Enterprise adds features like:
</p>
      <ul class="itemize1">
      <li class="itemize">
                                                                
                                                                
      <!--l. 28--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Private   instance   management</span>:   Run   Terraform   Enterprise
      within   your   own   infrastructure   for   full   control   over   the
      environment.
      </p></li>
      <li class="itemize">
      <!--l. 29--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Self-hosted  state  and  runs</span>:  Terraform  Enterprise  allows  you
      to store state ﬁles and run Terraform directly within your own
      environment,  providing  more  ﬂexibility  for  teams  with  strict
      compliance requirements.
      </p></li>
      <li class="itemize">
      <!--l. 30--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Enhanced  security  features</span>:  Integrate  with  your  enterprise’s
      identity  and  access  management  systems  to  control  who  can
      access infrastructure.</p></li></ul>
<!--l. 33--><p class="noindent" >Both Terraform Cloud and Enterprise provide a robust set of features to
enhance collaboration, security, and compliance, making them ideal for
teams managing complex infrastructure at scale.
<a 
 id="x1-168001r172"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">13.2    </span> <a 
 id="x1-1690002"></a>Terraform’s Ecosystem: Providers, Modules, and Tools</h3>
<!--l. 37--><p class="noindent" >While Terraform provides the foundational tools to manage infrastructure
as code, it is also part of a larger ecosystem of tools, providers, and
community-driven modules that extend its functionality. Understanding
this ecosystem will allow you to leverage existing resources and
tools, saving time and improving the eﬃciency of your infrastructure
automation.
<a 
 id="x1-169001r174"></a>
                                                                
                                                                
</p>
<h4 class="subsectionHead"><span class="titlemark">13.2.1    </span> <a 
 id="x1-1700001"></a>Terraform Providers</h4>
<!--l. 41--><p class="noindent" >Providers are the key components of Terraform that allow it to interact with
various platforms and services. Each provider is responsible for managing
the lifecycle of resources on a speciﬁc platform (e.g., AWS, Azure, Google
Cloud, etc.). Terraform supports a wide variety of providers, allowing you
to manage infrastructure across multiple cloud platforms, networking
systems, and other services.
</p><!--l. 43--><p class="noindent" >For example, the AWS provider allows you to manage AWS resources like
EC2 instances, S3 buckets, and IAM roles, while the Kubernetes provider
lets you manage resources on a Kubernetes cluster.
</p><!--l. 45--><p class="noindent" >You can explore all available providers and their documentation in the
oﬃcial Terraform Registry:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 48--><p class="noindent" >    <a 
href="https://registry.terraform.io/" class="url" ><span 
class="pcrr8t-x-x-120">https://registry.terraform.io/</span></a></p></li></ul>
<a 
 id="x1-170001r176"></a>
<h4 class="subsectionHead"><span class="titlemark">13.2.2    </span> <a 
 id="x1-1710002"></a>Terraform Modules</h4>
<!--l. 53--><p class="noindent" >Modules are an essential part of Terraform’s modular approach to
infrastructure management. A module is a collection of resources that are
grouped together and reused in diﬀerent conﬁgurations. By using modules,
you can reduce duplication, increase consistency, and manage infrastructure
more eﬃciently.
</p><!--l. 55--><p class="noindent" >The Terraform community maintains a large collection of pre-built modules
                                                                
                                                                
for common use cases, such as managing AWS resources, deploying
Kubernetes clusters, and conﬁguring DNS services. These modules can be
found in the Terraform Registry and can be easily integrated into your
conﬁguration.
</p><!--l. 57--><p class="noindent" >For example, the AWS VPC module allows you to quickly provision a
complete VPC, including subnets, route tables, and security groups, with
just a few lines of code:
</p>
<!--l. 59-->
  <div class="lstlisting" id="listing-83"><span class="label"><a 
 id="x1-171001r1"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">1</span></span><span style="color:#000000"><span 
class="pcrb8t-">module</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">vpc</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">{</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-171002r2"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">2</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">source</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">terraform</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">modules</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">vpc</span></span><span style="color:#000000"><span 
class="pcrr8t-">/</span></span><span style="color:#000000"><span 
class="pcrr8t-">aws</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-171003r3"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">3</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">name</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">my</span></span><span style="color:#000000"><span 
class="pcrr8t-">-</span></span><span style="color:#000000"><span 
class="pcrr8t-">vpc</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-171004r4"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">4</span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">cidr</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span 
class="pcrr8t-"> </span><span 
class="pcrr8t-"> </span><span style="color:#000000"><span 
class="pcrr8t-">=</span></span><span style="color:#000000"><span 
class="pcrr8t-"> </span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span style="color:#000000"><span 
class="pcrr8t-">10.0.0.0/16</span></span><span style="color:#000000"><span 
class="pcrr8t-">"</span></span><span 
class="pcrr8t-"> </span><br /> 
<span class="label"><a 
 id="x1-171005r5"></a><span 
class="ntx-Regular-tlf-t1-x-x-60">5</span></span><span style="color:#000000"><span 
class="pcrr8t-">}</span></span></div>
  
<!--l. 67--><p class="noindent" >Modules allow you to encapsulate complex infrastructure patterns into
reusable components, enabling you to quickly deploy standardized
resources across your environment.
<a 
 id="x1-171006r177"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">13.2.3    </span> <a 
 id="x1-1720003"></a>Other Tools in the Terraform Ecosystem</h4>
<!--l. 71--><p class="noindent" >In addition to providers and modules, the Terraform ecosystem includes a
variety of tools that can help improve your workﬂow and enhance your
infrastructure management process.
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 74--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Terraform  Enterprise/Cloud  API</span>:  Integrate  Terraform  with
      your   existing   CI/CD   pipelines   to   automate   infrastructure
      provisioning and management.
                                                                
                                                                
      </p></li>
      <li class="itemize">
      <!--l. 75--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Terragrunt</span>: A tool that helps with managing multiple Terraform
      conﬁgurations, especially in complex, multi-environment setups.
      </p></li>
      <li class="itemize">
      <!--l. 76--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Infracost</span>: A cost estimation tool that integrates with Terraform
      to  give  you  an  estimate  of  your  infrastructure  costs  before
      applying changes.
      </p></li>
      <li class="itemize">
      <!--l. 77--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Vault</span>: A tool from HashiCorp designed for secrets management
      and secure storage of sensitive data.</p></li></ul>
<!--l. 80--><p class="noindent" >By incorporating these tools into your workﬂow, you can streamline your
Terraform usage and improve the eﬃciency, security, and scalability of your
infrastructure.
<a 
 id="x1-172001r175"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">13.3    </span> <a 
 id="x1-1730003"></a>Continuous Learning and Growth with Terraform</h3>
<!--l. 84--><p class="noindent" >Terraform is a powerful and ﬂexible tool that evolves rapidly, with new
features, providers, and best practices being introduced regularly. To stay
ahead of the curve, it’s important to continue learning and adapting as the
tool and the infrastructure landscape change.
<a 
 id="x1-173001r178"></a>
</p>
                                                                
                                                                
<h4 class="subsectionHead"><span class="titlemark">13.3.1    </span> <a 
 id="x1-1740001"></a>Staying Up-to-Date with Terraform</h4>
<!--l. 88--><p class="noindent" >To keep up with new Terraform features and releases, make sure to
regularly check the oﬃcial Terraform blog, follow HashiCorp on social
media, and participate in the community:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 91--><p class="noindent" >    <a 
href="https://www.hashicorp.com/blog/" class="url" ><span 
class="pcrr8t-x-x-120">https://www.hashicorp.com/blog/</span></a>
      </p></li>
      <li class="itemize">
      <!--l. 92--><p class="noindent" >  <a 
href="https://www.terraform.io/" class="url" ><span 
class="pcrr8t-x-x-120">https://www.terraform.io/</span></a></p></li></ul>
<!--l. 95--><p class="noindent" >The Terraform community is active and constantly sharing new ideas,
techniques, and modules. Join community forums, attend meetups, and
contribute to open-source Terraform modules to engage with others and
learn from their experiences.
<a 
 id="x1-174001r180"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">13.3.2    </span> <a 
 id="x1-1750002"></a>Exploring Advanced Terraform Features</h4>
<!--l. 99--><p class="noindent" >Once you are comfortable with the basics of Terraform, you can explore
more advanced features like:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 102--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Dynamic Blocks and Expressions</span>: Learn how to use dynamic
      blocks to create resources based on complex conditions.
                                                                
                                                                
      </p></li>
      <li class="itemize">
      <!--l. 103--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Workspaces</span>:   Manage   multiple   environments   in   a   single
      conﬁguration using Terraform workspaces.
      </p></li>
      <li class="itemize">
      <!--l. 104--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Custom Providers</span>: Build your own custom providers to manage
      infrastructure  resources  that  are  not  supported  by  the  oﬃcial
      Terraform providers.</p></li></ul>
<!--l. 107--><p class="noindent" >Exploring these advanced features will allow you to push the boundaries of
what Terraform can do and enable you to build highly sophisticated
infrastructure automation workﬂows.
<a 
 id="x1-175001r179"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">13.4    </span> <a 
 id="x1-1760004"></a>Wrapping Up</h3>
<!--l. 111--><p class="noindent" >As you continue your journey with Terraform, remember that infrastructure
as code is a powerful way to manage infrastructure, but it is only eﬀective
when coupled with the right tools, practices, and continuous learning.
Terraform Cloud and Enterprise oﬀer enhanced collaboration features for
teams, while modules and providers make it easy to scale infrastructure. By
staying engaged with the Terraform community, using advanced features,
and continuously improving your skills, you can ensure that your
infrastructure remains robust, scalable, and adaptable to changing
needs.
</p><!--l. 115--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we’ll explore the Terraform impact. Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 14</span><br /><a 
 id="x1-17700014"></a>Reﬂections on Terraform’s Impact</h2>
<a 
 id="x1-177001r182"></a>
<h3 class="sectionHead"><span class="titlemark">14.1    </span> <a 
 id="x1-1780001"></a>The Human Element in Infrastructure</h3>
<!--l. 6--><p class="noindent" >In the world of infrastructure management, Terraform represents more than
just a tool—it symbolizes a shift in how we approach and think about
managing complex systems. As automation and cloud computing continue
to evolve, Terraform’s impact on the way we build and maintain
infrastructure is profound. But while Terraform provides the foundation for
infrastructure as code (IaC), it is ultimately the human element that drives
its success.
</p><!--l. 8--><p class="noindent" >Terraform empowers teams to manage their infrastructure with conﬁdence
and precision, but the true value comes when it is used as a collaborative
tool. By working together with colleagues, sharing best practices, and
learning from one another, teams can realize the full potential of Terraform
and the broader principles of IaC.
</p><!--l. 10--><p class="noindent" >The key to Terraform’s success is its ability to bring clarity, consistency,
and control to infrastructure management. This allows teams to focus on
solving business problems, rather than wrestling with the complexities of
manual infrastructure management.
<a 
 id="x1-178001r184"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">14.2    </span> <a 
 id="x1-1790002"></a>Simplicity vs. Complexity in IaC</h3>
<!--l. 14--><p class="noindent" >One of the core principles of Terraform is simplicity. Terraform allows you
to describe complex infrastructure in simple, human-readable conﬁguration
ﬁles. This simplicity not only makes it easier to write and maintain
                                                                
                                                                
infrastructure code but also reduces the risk of errors. By abstracting away
the underlying complexity, Terraform enables developers and operators to
focus on high-level goals, rather than worrying about how to conﬁgure each
individual component.
</p><!--l. 16--><p class="noindent" >However, simplicity doesn’t mean a lack of power. Terraform allows you to
manage everything from a single virtual machine to complex multi-cloud
architectures, while keeping the conﬁguration simple and declarative. This
balance between simplicity and power is one of the reasons Terraform
has become so popular in the DevOps and infrastructure as code
communities.
</p><!--l. 18--><p class="noindent" >While Terraform is simple at its core, it also enables advanced users to
create sophisticated infrastructures by leveraging features like modules,
dynamic blocks, and remote backends. Terraform’s ﬂexibility makes it
adaptable to a wide range of use cases, from small-scale applications to
large enterprise environments.
<a 
 id="x1-179001r185"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">14.3    </span> <a 
 id="x1-1800003"></a>The Philosophy of Infrastructure as Code</h3>
<!--l. 22--><p class="noindent" >Infrastructure as Code (IaC) is not just about automating the provisioning of
resources—it’s about treating infrastructure as a ﬁrst-class citizen in the
software development lifecycle. IaC enables teams to deﬁne, manage, and
version infrastructure using the same principles and practices that are used
for application code.
</p><!--l. 24--><p class="noindent" >Terraform embodies this philosophy by treating infrastructure
conﬁgurations as code that can be versioned, tested, and reviewed. This
approach brings the same beneﬁts to infrastructure that software
development has enjoyed for decades: consistency, repeatability, and
reliability. With Terraform, infrastructure becomes just another piece of
                                                                
                                                                
software that can be written, tested, and deployed in a controlled
manner.
</p><!--l. 26--><p class="noindent" >By adopting the IaC philosophy, organizations can achieve greater
collaboration between development, operations, and security teams.
Infrastructure is no longer a black box, but something that can be managed
and improved collaboratively, just like the software that runs on top of
it.
<a 
 id="x1-180001r186"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">14.4    </span> <a 
 id="x1-1810004"></a>Terraform and the Future of Infrastructure Management</h3>
<!--l. 30--><p class="noindent" >Terraform has been instrumental in the adoption of IaC practices, but its
role in the future of infrastructure management is just beginning. As cloud
platforms continue to evolve and new technologies emerge, Terraform
will adapt and grow to meet the changing needs of infrastructure
automation.
<a 
 id="x1-181001r181"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">14.4.1    </span> <a 
 id="x1-1820001"></a>Multi-Cloud and Hybrid Environments</h4>
<!--l. 34--><p class="noindent" >One of the most exciting areas where Terraform is making an impact is in
multi-cloud and hybrid environments. With the rise of multi-cloud
strategies, organizations are using more than one cloud provider to ensure
redundancy, reduce costs, or leverage the strengths of diﬀerent providers.
Terraform’s ability to manage infrastructure across multiple providers
makes it an ideal tool for multi-cloud environments.
</p><!--l. 36--><p class="noindent" >As cloud providers evolve, Terraform will continue to expand its support for
new resources, features, and services. This makes Terraform a future-proof
tool for managing infrastructure across diﬀerent cloud platforms, ensuring
                                                                
                                                                
that you can maintain consistency and control regardless of which providers
you use.
<a 
 id="x1-182001r188"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">14.4.2    </span> <a 
 id="x1-1830002"></a>Terraform and Kubernetes</h4>
<!--l. 40--><p class="noindent" >Terraform’s integration with Kubernetes is another key area of growth.
Kubernetes has become the de facto standard for container orchestration,
and as more organizations adopt Kubernetes, the need for managing
infrastructure alongside Kubernetes clusters becomes even more important.
Terraform’s ability to manage both infrastructure and Kubernetes resources
provides a uniﬁed approach to provisioning and managing cloud
environments.
</p><!--l. 42--><p class="noindent" >By using Terraform alongside Kubernetes, organizations can automate the
entire stack—from the virtual machines and networks to the containers
running on Kubernetes clusters—ensuring that all resources are managed
consistently and reliably.
<a 
 id="x1-183001r189"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">14.4.3    </span> <a 
 id="x1-1840003"></a>Collaboration and Automation in the DevOps Era</h4>
<!--l. 46--><p class="noindent" >The DevOps movement has been one of the driving forces behind the
adoption of IaC and tools like Terraform. DevOps emphasizes collaboration
between development and operations teams, and Terraform supports this by
providing a tool that can be used by both groups to manage infrastructure.
As DevOps practices continue to evolve, Terraform will remain
a key enabler of continuous integration and continuous delivery
(CI/CD), automating the provisioning, conﬁguration, and scaling of
infrastructure.
                                                                
                                                                
</p><!--l. 48--><p class="noindent" >By integrating Terraform with CI/CD pipelines, teams can automate the
entire process of infrastructure deployment, from code commit to
infrastructure provisioning. This creates a seamless workﬂow that allows
teams to deploy applications faster, with greater consistency and fewer
errors.
<a 
 id="x1-184001r187"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">14.5    </span> <a 
 id="x1-1850005"></a>The Future of Terraform: Expanding Ecosystem and Community</h3>
<!--l. 52--><p class="noindent" >Terraform’s success is not just due to its core features but also its thriving
ecosystem and community. The Terraform Registry, which hosts providers,
modules, and integrations, has grown signiﬁcantly, oﬀering a wide range of
resources for users to build upon. The community of contributors,
maintainers, and users continues to grow, ensuring that Terraform evolves
to meet the ever-changing demands of the cloud and infrastructure
automation space.
</p><!--l. 54--><p class="noindent" >In the future, we can expect Terraform to continue expanding its support for
new providers, services, and tools. As Terraform continues to integrate with
new technologies, it will remain at the forefront of infrastructure
automation, empowering teams to build scalable, reliable, and secure
infrastructures.
<a 
 id="x1-185001r191"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">14.6    </span> <a 
 id="x1-1860006"></a>Wrapping Up</h3>
<!--l. 58--><p class="noindent" >Terraform has fundamentally changed the way infrastructure is managed.
By embracing the philosophy of Infrastructure as Code, Terraform has
enabled teams to manage complex infrastructures with simplicity, clarity,
and consistency. Its impact on DevOps practices, cloud management, and
                                                                
                                                                
multi-cloud strategies is profound, and it will continue to play a critical role
in shaping the future of infrastructure automation.
</p><!--l. 60--><p class="noindent" >As Terraform continues to evolve and expand, its inﬂuence on infrastructure
management will only grow. By adopting Terraform and best practices
around infrastructure as code, you can ensure that your infrastructure is not
only scalable and eﬃcient but also resilient and adaptable to future
needs.
</p><!--l. 64--><p class="noindent" ><span 
class="ntx-Italic-tlf-t1-x-x-120">In the next chapter, we will explore the conclusions. Let’s go.</span>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="chapterHead"><span class="titlemark">Chapter 15</span><br /><a 
 id="x1-18700015"></a>Conclusion</h2>
<a 
 id="x1-187001r192"></a>
<h3 class="sectionHead"><span class="titlemark">15.1    </span> <a 
 id="x1-1880001"></a>Reﬂecting on the Terraform Journey</h3>
<!--l. 6--><p class="noindent" >As we reach the ﬁnal chapter of this journey through Terraform, it’s
essential to reﬂect on what we’ve learned and how Terraform ﬁts into the
broader landscape of infrastructure management. Terraform is more than
just a tool—it’s a paradigm shift in how we approach provisioning and
managing cloud infrastructure.
</p><!--l. 8--><p class="noindent" >By embracing Terraform and the principles of Infrastructure as Code (IaC),
teams can achieve greater consistency, scalability, and collaboration.
Terraform provides a clear and simple way to describe and manage
infrastructure, ensuring that infrastructure changes are predictable,
repeatable, and version-controlled. With Terraform, we no longer need
to rely on ad-hoc scripts or manual conﬁgurations to manage our
environments.
</p><!--l. 10--><p class="noindent" >This chapter summarizes the key takeaways from this book, emphasizing
the fundamental concepts and best practices that will guide your ongoing
use of Terraform. Whether you are just starting with Terraform or looking
to enhance your existing workﬂows, the concepts discussed in this book
will help you get the most out of your infrastructure automation
eﬀorts.
<a 
 id="x1-188001r194"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">15.2    </span> <a 
 id="x1-1890002"></a>Terraform’s Impact on Infrastructure Automation</h3>
<!--l. 14--><p class="noindent" >Terraform’s declarative approach to infrastructure provisioning has had a
                                                                
                                                                
transformative eﬀect on the industry. By enabling teams to treat
infrastructure as code, Terraform allows them to leverage the same practices
that developers have long used for application code—such as version
control, testing, and collaboration.
</p><!--l. 16--><p class="noindent" >This shift to IaC has several beneﬁts:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 19--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Consistency</span>:  Terraform  ensures  that  the  same  conﬁguration
      ﬁles are used across environments, reducing conﬁguration drift
      and discrepancies between development, staging, and production
      environments.
      </p></li>
      <li class="itemize">
      <!--l. 20--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Collaboration</span>:    With    Terraform,    both    development    and
      operations teams can collaborate more easily, as infrastructure is
      managed through the same processes as software development.
      Changes to infrastructure can be tracked through version control,
      making collaboration more transparent and organized.
      </p></li>
      <li class="itemize">
      <!--l. 21--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Automation</span>: Terraform automates the process of provisioning
      and  managing  infrastructure,  eliminating  the  need  for  manual
      interventions and reducing the risk of human error.
      </p></li>
      <li class="itemize">
      <!--l. 22--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Scalability</span>: Terraform’s modularity and support for multi-cloud
      environments  allow  organizations  to  scale  infrastructure  as
                                                                
                                                                
      needed,  adapting  to  growing  demand  and  expanding  their
      infrastructure across multiple regions and providers.</p></li></ul>
<!--l. 25--><p class="noindent" >These beneﬁts position Terraform as a cornerstone of modern DevOps
practices, enabling teams to deliver infrastructure quickly and eﬃciently.
<a 
 id="x1-189001r195"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">15.3    </span> <a 
 id="x1-1900003"></a>The Role of Terraform in the DevOps Pipeline</h3>
<!--l. 29--><p class="noindent" >Terraform is a powerful tool that seamlessly integrates with the
continuous integration and continuous deployment (CI/CD) pipelines
of modern software development teams. By using Terraform in a
CI/CD pipeline, teams can automate the provisioning, conﬁguration,
and management of infrastructure in tandem with their application
code.
</p><!--l. 31--><p class="noindent" >The integration of Terraform with CI/CD pipelines ensures that:
</p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 34--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Infrastructure as Code is versioned</span>: Infrastructure changes are
      treated with the same rigor as application code, ensuring that
      changes are tracked, reviewed, and tested before being applied.
      </p></li>
      <li class="itemize">
      <!--l. 35--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Deployment  becomes  predictable</span>:  Terraform  allows  teams
      to    consistently    apply    infrastructure    changes    across    all
      environments,   making   deployment   more   predictable   and
      reducing the likelihood of failures.
                                                                
                                                                
      </p></li>
      <li class="itemize">
      <!--l. 36--><p class="noindent" ><span 
class="ntx-Bold-tlf-t1-x-x-120">Collaboration   is   streamlined</span>:   Terraform   enables   better
      collaboration between developers, operations, and security teams
      by creating a single, shared conﬁguration for infrastructure.</p></li></ul>
<!--l. 39--><p class="noindent" >Incorporating Terraform into your DevOps pipeline helps streamline
workﬂows, automate repetitive tasks, and ultimately speed up the process of
delivering high-quality software to production.
<a 
 id="x1-190001r196"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">15.4    </span> <a 
 id="x1-1910004"></a>Looking Ahead: Terraform and the Future of Cloud Infrastructure</h3>
<!--l. 43--><p class="noindent" >Terraform’s continued evolution positions it as a critical tool in the ongoing
transformation of cloud infrastructure management. With the rise of
multi-cloud and hybrid-cloud environments, Terraform provides the
ﬂexibility to manage resources across multiple providers, ensuring
consistency and eﬃciency regardless of where your infrastructure is
hosted.
</p><!--l. 45--><p class="noindent" >In the future, Terraform will continue to support new cloud providers,
services, and use cases, making it even more versatile and powerful. As
organizations continue to embrace cloud-native architectures, Terraform
will play a pivotal role in simplifying the management of these complex
environments.
</p><!--l. 47--><p class="noindent" >Furthermore, Terraform’s integration with other HashiCorp tools, such as
Vault for secrets management and Consul for service discovery, will
provide a more comprehensive approach to managing cloud infrastructure
and services.
<a 
 id="x1-191001r197"></a>
                                                                
                                                                
</p>
<h3 class="sectionHead"><span class="titlemark">15.5    </span> <a 
 id="x1-1920005"></a>Final Thoughts: Mastering Terraform</h3>
<!--l. 51--><p class="noindent" >Mastering Terraform is not just about understanding the syntax and
commands. It’s about understanding the underlying philosophy of
Infrastructure as Code and how to apply it eﬀectively to your organization’s
infrastructure. The real power of Terraform lies in its ability to automate
and standardize infrastructure management while enabling teams to
collaborate more eﬀectively.
</p><!--l. 53--><p class="noindent" >By following the best practices outlined in this book, such as
modularization, state management, version control, and testing, you will be
well-equipped to tackle the challenges of modern infrastructure
management. Terraform empowers you to focus on building and delivering
your applications, while it handles the complexity of managing the
underlying infrastructure.
</p><!--l. 55--><p class="noindent" >The journey with Terraform is just beginning. As you continue to explore,
experiment, and implement Terraform in your own projects, you will unlock
even more potential for automation, eﬃciency, and scalability in
your infrastructure. The key is to keep learning, stay curious, and
apply Terraform’s powerful features to solve real-world infrastructure
challenges.
<a 
 id="x1-192001r198"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">15.6    </span> <a 
 id="x1-1930006"></a>Good Luck on Your Terraform Journey!</h3>
<!--l. 59--><p class="noindent" >With the knowledge you’ve gained from this book, you are now equipped to
tackle the complexities of modern infrastructure management with
conﬁdence. Whether you’re managing a small-scale application or building
large, multi-cloud environments, Terraform will be your ally in creating,
                                                                
                                                                
managing, and scaling infrastructure with ease.
</p><!--l. 61--><p class="noindent" >Remember that Terraform is more than just a tool—it’s a new way of
thinking about and interacting with your infrastructure. Embrace this
mindset, and you’ll be able to build reliable, eﬃcient, and scalable
infrastructure that meets the needs of your organization and your
users.
</p><!--l. 63--><p class="noindent" >Good luck, and happy Terraforming!
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
</p>
<h2 class="likechapterHead"><a 
 id="x1-1940006"></a>Bibliography</h2>
     <div class="thebibliography">
     <p class="bibitem" ><span class="biblabel">
  [1]<span class="bibsp">   </span></span><a 
 id="XterraformKubernetes"></a>Mihail Anastasov.  <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform for Kubernetes: Infrastructure</span>
     <span 
class="ntx-Italic-tlf-t1-x-x-120">Automation for Kubernetes Clusters</span>. Packt Publishing, 2022.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [2]<span class="bibsp">   </span></span><a 
 id="XterraformUpAndRunning"></a>Yevgeniy Brikman.  <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform: Up and Running</span>.  O’Reilly
     Media, 2018.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [3]<span class="bibsp">   </span></span><a 
 id="XterraformBestPractices"></a>HashiCorp. <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform Best Practices</span>.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [4]<span class="bibsp">   </span></span><a 
 id="XterraformGitHub"></a>HashiCorp. <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform GitHub Repository</span>.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [5]<span class="bibsp">   </span></span><a 
 id="XterraformModules"></a>HashiCorp. <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform Modules</span>.
     </p>
                                                                
                                                                
     <p class="bibitem" ><span class="biblabel">
  [6]<span class="bibsp">   </span></span><a 
 id="XgettingStartedTerraform"></a>HashiCorp. Getting started with terraform. 2023.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [7]<span class="bibsp">   </span></span><a 
 id="XterraformEssentials"></a>HashiCorp.    Terraform  essentials:  Simplify  infrastructure
     management, 2023.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [8]<span class="bibsp">   </span></span><a 
 id="XterraformTutorials"></a>HashiCorp.   Terraform  tutorials  for  beginners  and  experts,
     2023.
     </p>
     <p class="bibitem" ><span class="biblabel">
  [9]<span class="bibsp">   </span></span><a 
 id="XterraformDoc"></a>HashiCorp. <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform Documentation</span>, 2025.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [10]<span class="bibsp">   </span></span><a 
 id="XterraformForDevOps"></a>Mitchell Hashimoto.  <span 
class="ntx-Italic-tlf-t1-x-x-120">Terraform for DevOps: Infrastructure</span>
     <span 
class="ntx-Italic-tlf-t1-x-x-120">Automation with Terraform</span>. Manning Publications, 2021.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [11]<span class="bibsp">   </span></span><a 
 id="XterraformCloudRedHat"></a>Red Hat. How to use terraform cloud for team collaboration.
     2023.
     </p>
     <p class="bibitem" ><span class="biblabel">
 [12]<span class="bibsp">   </span></span><a 
 id="XterraformWithAWS"></a>Joe   McDonald.       Automating   aws   infrastructure   with
     terraform. 2022.
     </p>
                                                                
                                                                
     <p class="bibitem" ><span class="biblabel">
 [13]<span class="bibsp">   </span></span><a 
 id="XcommonTerraformIssues"></a>TechTarget.   Common terraform issues and how to resolve
     them. 2023.
</p>
     </div>
                                                                
                                                                
                                                                
                                                                
<h2 class="likechapterHead"><a 
 id="x1-1950006"></a>About the Author</h2>
<a 
 id="Q1-1-202"></a>
<!--l. 11--><p class="noindent" >John Stilia is a seasoned DevOps engineer and automation enthusiast with a
robust ability to streamline infrastructure management, security, and
deployment. With expertise in Ansible, Terraform, Python, Bash,
AWS, Kubernetes, and more, he designs eﬃcient, scalable, and
reliable pipelines that ensure operations run seamlessly. Passionate
about motorbikes, technology, and embedded devices, John has
a proven track record in leading teams and fostering a culture of
collaboration. His inclusive perspective, shaped by his experiences
with ADHD and neurodiversity, brings unique value to any team
dynamic.
</p><!--l. 22--><p class="noindent" >Connect with the author: </p>
      <ul class="itemize1">
      <li class="itemize">
      <!--l. 25--><p class="noindent" >Blog:
      <a 
href="indraft.blog" class="url" ><span 
class="pcrr8t-x-x-120">indraft.blog</span></a>
      </p></li>
      <li class="itemize">
                                                                
                                                                
      <!--l. 26--><p class="noindent" >GitHub:
      <a 
href="github.com/stiliajohny" class="url" ><span 
class="pcrr8t-x-x-120">github.com/stiliajohny</span></a>
      </p></li>
      <li class="itemize">
      <!--l. 27--><p class="noindent" >LinkedIn:
      <a 
href="linkedin.com/in/johnstilia" class="url" ><span 
class="pcrr8t-x-x-120">linkedin.com/in/johnstilia</span></a>
      </p></li>
      <li class="itemize">
      <!--l. 28--><p class="noindent" >Twitter:
      <a 
href="@midnight\_devsec" class="url" ><span 
class="pcrr8t-x-x-120">@midnight' _devsec</span></a></p></li></ul>
                                                                
                                                                
                                                                
                                                                
 
</body></html> 

                                                                


